window.RQ=window.RQ||{},RQ.configs={browser:["chrome","firefox"][0],env:["local","beta","prod"][2],version:"5.0.0"};var envConfigs={local:{WEB_URL:"http://localhost:3000"},beta:{WEB_URL:"https://beta.requestly.in"},prod:{WEB_URL:"https://www.requestly.in"}},browserConfigs={chrome:{storageType:"sync",contextMenuContexts:["browser_action"]},firefox:{storageType:"local",contextMenuContexts:["all"]}};Object.assign(RQ.configs,envConfigs[RQ.configs.env],browserConfigs[RQ.configs.browser]),window.RQ=window.RQ||{},RQ.VERSION=3,RQ.VERSIONS={REPLACE_RULE:2},RQ.RULES_PAGE_URL=RQ.configs.WEB_URL+"/rules/",RQ.RULES_PAGE_URL_PATTERN=RQ.RULES_PAGE_URL+"*",RQ.BLACK_LIST_DOMAINS=["requestly.in"],RQ.STRING_CONSTANTS={SLASH:"/"},RQ.LIMITS={NUMBER_SHARED_LISTS:10},RQ.RULE_TYPES={REDIRECT:"Redirect",CANCEL:"Cancel",REPLACE:"Replace",HEADERS:"Headers",USERAGENT:"UserAgent",SCRIPT:"Script"},RQ.HEADER_NAMES={USER_AGENT:"User-Agent"},RQ.RULE_STATUS={ACTIVE:"Active",INACTIVE:"Inactive"},RQ.RULE_KEYS={URL:"Url",HOST:"host",PATH:"path",HEADER:"Header"},RQ.RULE_OPERATORS={EQUALS:"Equals",CONTAINS:"Contains",MATCHES:"Matches",WILDCARD_MATCHES:"Wildcard_Matches"},RQ.MODIFICATION_TYPES={ADD:"Add",REMOVE:"Remove",MODIFY:"Modify",REPLACE:"Replace"},RQ.HEADERS_TARGET={REQUEST:"Request",RESPONSE:"Response"},RQ.REQUEST_TYPES={MAIN_FRAME:"mainFrame",PAGE_REQUEST:"pageRequest"},RQ.SCRIPT_TYPES={URL:"url",CODE:"code"},RQ.SCRIPT_LOAD_TIME={BEFORE_PAGE_LOAD:"beforePageLoad",AFTER_PAGE_LOAD:"afterPageLoad"},RQ.SCRIPT_LIBRARIES={JQUERY:{name:"jQuery",src:"https://code.jquery.com/jquery-2.2.4.js"},UNDERSCORE:{name:"Underscore",src:"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"}},RQ.RESPONSE_CODES={NOT_FOUND:404},RQ.STORAGE_KEYS={REQUESTLY_SETTINGS:"rq_settings",USER_INFO:"user_info",LATEST_NOTIFICATION_READ_BY_USER:"latestNotificationReadId"},RQ.MESSAGES={DELETE_ITEMS:"Are you sure you want to delete the selected items ?",SIGN_IN_TO_VIEW_SHARED_LISTS:"Please login with Google to view your Shared Lists.",ERROR_AUTHENTICATION:"Received some error in authentication. Please try again later!!",SHARED_LISTS_LIMIT_REACHED:"You can not create more than "+RQ.LIMITS.NUMBER_SHARED_LISTS+" shared lists",DEACTIVATE_REQUESTLY_MENU_OPTION:"Deactivate Requestly"},RQ.RESOURCES={EXTENSION_ICON:"/resources/images/38x38.png",EXTENSION_ICON_GREYSCALE:"/resources/images/38x38_greyscale.png"},RQ.GA_EVENTS={CATEGORIES:{RULES:"rules",USER:"user",SHARED_LIST:"shared list",EXTENSION:"extension"},ACTIONS:{MODIFIED:"modified",CREATED:"created",DELETED:"deleted",ACTIVATED:"activated",DEACTIVATED:"deactivated",IMPORTED:"imported",EXPORTED:"exported",LIMIT_REACHED:"limit reached",AUTHENTICATED:"authenticated",VIEWED:"viewed"}},RQ.USER={AUTHORIZED:"authorized-user",UNAUTHORIZED:"unauthorized-user"},RQ.FIREBASE_NODES={USERS:"users",PUBLIC:"public",SHARED_LISTS:"sharedLists"},RQ.DATASTORE={ACTIONS:{CHECK_USER_AUTH:"check:userAuthenticated",AUTHENTICATE:"authenticate",GETVALUE:"getValue",SETVALUE:"setValue"}},RQ.htmlEncode=function(a){return $("<div/>").text(a).html()},RQ.getSharedURL=function(a){return RQ.RULES_PAGE_URL+"#sharedList/"+a},window.RQ=window.RQ||{},RQ.Utils=RQ.Utils||{},RQ.Utils.regexFormat="^/(.+)/(|i|g|ig|gi)$",RQ.Utils.isValidRegex=function(a){return-1!==a.search(new RegExp(RQ.Utils.regexFormat))},RQ.Utils.toRegex=function(a){var b,c=this.isValidRegex(a);return c?(b=a.match(new RegExp(RQ.Utils.regexFormat)),new RegExp(b[1],b[2])):null},RQ.Utils.isValidUrl=function(a){return 0===a.search(/^http:|https:|ftp:|javascript:/)},RQ.Utils.getId=function(){return Date.now()},RQ.Utils.getCurrentTime=function(){return Date.now()},RQ.Utils.reloadPage=function(a){a=a||0,setTimeout(function(){window.location.reload()},a)},RQ.Utils.submitEvent=function(a,b,c){var d=document.getElementById("events-observer-placeholder"),e=$("<span></span>").attr({"data-category":a,"data-action":b,"data-label":c});d&&d.appendChild(e.get(0))},RQ.Utils.removeLastPart=function(a,b){return a=a||"",-1===a.indexOf(b)?a:(a=a.split(b),a.length--,a.join(b))},RQ.Utils.setCookie=function(a,b,c){document.cookie=a+"="+b+"; path=/; max-age="+c},RQ.Utils.readCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return null},RQ.Utils.eraseCookie=function(a){RQ.Utils.setCookie(a,"",1)},RQ.Utils.extractUrlComponent=function(a,b){switch(BG.dummyAnchor.href=a,b){case RQ.RULE_KEYS.URL:return a;case RQ.RULE_KEYS.HOST:return BG.dummyAnchor.host;case RQ.RULE_KEYS.PATH:return BG.dummyAnchor.pathname}console.error("Invalid source key",a,b)},window.RQ=window.RQ||{},RQ.MessageHandler={eventCallbackMap:{},configs:{isLoggingEnabled:!1},constants:{CONTENT_SCRIPT:"content_script",PAGE_SCRIPT:"page_script",DOMAIN:RQ.configs.WEB_URL,SOURCE_FIELD:"source",ACTION_USER_LOGGED_IN:"user:loggedIn"},addMessageListener:function(){window.addEventListener("message",this.handleMessageReceived.bind(this))},registerCallback:function(a,b){this.eventCallbackMap[a]=b},sendMessage:function(a,b){if(!a.action)return void(this.isLoggingEnabled&&console.error("Invalid message. Must contain some action"));this.eventCallbackMap[a.action]=b,a[this.constants.SOURCE_FIELD]=this.constants.CONTENT_SCRIPT,window.postMessage(a,this.constants.DOMAIN)},handleMessageReceived:function(a){var b;a&&a.data&&a.data.source===this.constants.PAGE_SCRIPT&&"function"==typeof(b=this.eventCallbackMap[a.data.action])&&(delete this.eventCallbackMap[a.data.action],b.call(this,a.data.response))},init:function(){this.addMessageListener()}},RQ.MessageHandler.init(),window.RQ=window.RQ||{},RQ.DataStoreUtils={setUserProfileData:function(a){RQ.currentUser.setProfile(a).setUserLoggedIn(!0)},isUserAuthenticated:function(a,b){RQ.MessageHandler.sendMessage({action:RQ.DATASTORE.ACTIONS.CHECK_USER_AUTH,checkOnPageLoad:b},function(b){b&&RQ.DataStoreUtils.setUserProfileData(b),a.call(null,b)})},authenticate:function(a){RQ.MessageHandler.sendMessage({action:RQ.DATASTORE.ACTIONS.AUTHENTICATE},function(b){RQ.DataStoreUtils.setUserProfileData(b),a.call(null,b)})},getValue:function(a,b){RQ.MessageHandler.sendMessage({action:RQ.DATASTORE.ACTIONS.GETVALUE,pathArray:a},b)},setValue:function(a,b,c){RQ.MessageHandler.sendMessage({action:RQ.DATASTORE.ACTIONS.SETVALUE,pathArray:a,value:b},c)}},window.RQ=window.RQ||{},RQ.UserAgentLibrary=RQ.UserAgentLibrary||{},RQ.UserAgentLibrary={USER_AGENT:{device:{android:{name:"Android",values:{phone:{name:"Android Phone",value:"Mozilla/5.0 (Linux; Android 5.1.1; Nexus 6 Build/LYZ28E) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Mobile Safari/537.36"},tablet:{name:"Android Tablet",value:"Mozilla/5.0 (Linux; Android 4.3; Nexus 10 Build/JSS15Q) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36"}}},apple:{name:"Apple",values:{iphone:{name:"Apple iPhone",value:"Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"},ipad:{name:"Apple iPad",value:"Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"}}},windows:{name:"Windows",values:{phone:{name:"Windows Phone",value:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 920)"},tablet:{name:"Windows Tablet",value:"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0; Touch; NOKIA; Lumia 920)"}}},blackberry:{name:"Blackberry",values:{phone:{name:"Blackberry Phone",value:"Mozilla/5.0 (BlackBerry; U; BlackBerry 9900; en-US) AppleWebKit/534.11 (KHTML, like Gecko) Version/7.0.0.187 Mobile Safari/534.11"},tablet:{name:"Blackberry Tablet",value:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.0.0; en-US) AppleWebKit/535.8 (KHTML, like Gecko) Version/7.2.0.0 Safari/535.8"}}},symbian_phone:{name:"Symbian Phone",value:"Mozilla/5.0 (SymbianOS) AppleWebKit/533.4 (KHTML, like Gecko) NokiaBrowser/7.3.1.33 Mobile Safari/533.4 3gpp-gba"}},browser:{chrome:{name:"Google Chrome",values:{windows:{name:"Chrome on Windows",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36"},macintosh:{name:"Chrome on Macintosh",value:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36"},linux:{name:"Chrome on Linux",value:"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36"}}},firefox:{name:"Mozilla Firefox",values:{windows:{name:"Firefox on Windows",value:"Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 Firefox/52.0"},macintosh:{name:"Firfox on Macintosh",value:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10; rv:52.0) Gecko/20100101 Firefox/52.0"},linux:{name:"Firefox on Linux",value:"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0"}}},safari:{name:"Safari",value:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/602.4.8 (KHTML, like Gecko) Version/10.0.3 Safari/602.4.8"},msie:{name:"Microsoft Internet Explorer",values:{msie6:{name:"Internet Explorer 6",value:"Mozilla/4.0(compatible; MSIE 6.0; Windows NT 5.1)"},msie7:{name:"Internet Explorer 7",value:"Mozilla/4.0(compatible; MSIE 7.0; Windows NT 6.0)"},msie8:{name:"Internet Explorer 8",value:"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0)"},msie9:{name:"Internet Explorer 9",value:"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)"},msie10:{name:"Internet Explorer 10",value:"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)"},msie11:{name:"Internet Explorer 11",value:"Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko"}}},msedge:{name:"Microsoft Edge",value:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.10240"},opera:{name:"Opera",value:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.52 Safari/537.36 OPR/15.0.1147.100"}}},getDefaultUserAgent:function(){return navigator&&navigator.userAgent||""}};var StorageService={records:[],isRecordsFetched:!1,DB:chrome.storage[RQ.configs.storageType],primaryKey:"ruleType"};StorageService.printRecords=function(){this.DB.get(null,function(a){console.log(a)})},StorageService.clearDB=function(){this.DB.clear()},StorageService.getRecords=function(a){var b=this;if(a=a||{},this.isRecordsFetched&&!a.forceFetch)return void("function"==typeof a.callback&&a.callback(this.records));this.records.length=0,this.DB.get(null,function(c){for(var d in c)void 0!==c[d][StorageService.primaryKey]&&b.records.push(c[d]);b.isRecordsFetched=!0,"function"==typeof a.callback&&a.callback(b.records)})},StorageService.saveRecord=function(a,b){b=b||function(){console.log("Default Handler: Saving Object ",a)},this.DB.set(a,b)},StorageService.getRecord=function(a,b){b=b||function(){console.log("Default handler called when record is fetched:",a)},StorageService.DB.get(a,b)},StorageService.removeRecord=function(a,b){b=b||function(){console.log("Default handler called when record is removed:",a)},StorageService.DB.remove(a,b)},StorageService.getCachedRecordIndex=function(a){var b;for(b=0;b<StorageService.records.length;b++)if(StorageService.records[b].id===a)return b;return-1},StorageService.updateRecords=function(a,b){var c,d,e,f;if(StorageService.DB===chrome.storage[b])for(f in a)if(a.hasOwnProperty(f)){if(c=a[f],d=StorageService.getCachedRecordIndex(f),e=-1!==d,void 0!==c.newValue){if(void 0===c.newValue[StorageService.primaryKey])continue;e?StorageService.records[d]=c.newValue:StorageService.records.push(c.newValue)}void 0!==c.oldValue&&void 0===c.newValue&&e&&StorageService.records.splice(d,1)}},chrome.storage.onChanged.addListener(StorageService.updateRecords);var Logger={enabled:!1,ns:"Requestly: ",log:function(a){this.enabled&&console.log.apply(console,[this.ns].concat(Array.prototype.slice.call(arguments)))},error:function(a){this.enabled&&console.error.apply(console,[this.ns].concat(Array.prototype.slice.call(arguments)))}},Notification={Types:{SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},NotificationTypeHandler:{success:toastr.success,error:toastr.error,info:toastr.info,warning:toastr.warning},defaultOptions:{closeButton:!0,debug:!1,positionClass:"toast-top-right",onclick:null,showDuration:"2000",hideDuration:"1000",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},show:function(a,b,c,d){var e=_.extend({},this.defaultOptions,d);this.NotificationTypeHandler[a].call(null,b,c,e)}};!function(a){function b(){var b=a("#downloadLink");return 0===b.length&&(b=a('<a id="downloadLink">download</a>').appendTo("body")),b.hide(),b}function c(a,c){var d=new Blob([a],{type:"text/plain"}),e=b();e.attr("download",c||"file"),void 0!==window.URL&&e.attr("href",window.URL.createObjectURL(d)),e.get(0).click()}function d(){var b=a("#uploadLink");return 0===b.length&&(b=a('<input type="file" id="uploadLink" />').appendTo("body")),b.hide(),b}function e(a){var b=d(),c=new FileReader;c.onload=function(b){a(b.target.result)},b.change(function(){c.readAsText(b.get(0).files[0],"UTF-8"),b.val("")}),b.click()}Backbone.on("file:save",c),Backbone.on("file:load",e)}(jQuery),window.RQ=window.RQ||{},RQ.StorageService=StorageService,RQ.Mixins=RQ.Mixins||{},RQ.TemplateHelpers=RQ.TemplateHelpers||{},RQ.HandlebarHelpers=RQ.HandlebarHelpers||{},RQ.init=function(){this.currentUser=new UserModel,this.router=new RQ.Router,this.fetchSettings(),this.addListenerForBackgroundMessages(),this.addVersionClass(),Backbone.history.start()},RQ.showView=function(a,b){this.currentView&&this.currentView.close(),this.currentView=a,this.currentView.render(b),$("#content").html(this.currentView.el)},RQ.showModalView=function(a,b){this.currentModalView&&this.currentModalView.close(),this.currentModalView=a,this.currentModalView.render(b),$("#modal-container").html(this.currentModalView.el),$(this.currentModalView.el).modal("show")},RQ.fetchSettings=function(){RQ.StorageService.getRecord(RQ.STORAGE_KEYS.REQUESTLY_SETTINGS,function(a){a=a||{},(a[RQ.STORAGE_KEYS.REQUESTLY_SETTINGS]||{isExtensionEnabled:!0}).isExtensionEnabled||RQ.showBackdrop()})},RQ.showBackdrop=function(){$("#extension-disable-backdrop").show(),$("#extension-disable-backdrop-message").show()},RQ.hideBackdrop=function(){$("#extension-disable-backdrop").hide(),$("#extension-disable-backdrop-message").hide()},RQ.addListenerForBackgroundMessages=function(){chrome.runtime.onMessage.addListener(function(a){!0===a.isExtensionEnabled&&RQ.hideBackdrop(),!1===a.isExtensionEnabled&&RQ.showBackdrop()})},RQ.addListenerForAuthenticationChanged=function(){RQ.currentUser.on("change:isLoggedIn",function(){var a=RQ.currentUser.getUserLoggedIn();$("body").removeClass(RQ.USER.AUTHORIZED).removeClass(RQ.USER.UNAUTHORIZED).addClass(a?RQ.USER.AUTHORIZED:RQ.USER.UNAUTHORIZED)})},RQ.addVersionClass=function(){RQ.VERSION>=1&&$("body").addClass("shared-rules-enabled")},Backbone.View.prototype.close=function(){if(this.childViews&&this.childViews instanceof Backbone.View)for(var a=0;a<this.childViews.length;a++)this.childViews[a].close();"function"==typeof this.destructWidgets&&this.destructWidgets(),this.remove(),this.unbind()},RQ.HandlebarHelpers.DebugHelper=function(a){console.group("DebugHelper"),console.log(this),a&&console.log(a),console.groupEnd("DebugHelper")},RQ.HandlebarHelpers.EqualsHelper=function(a,b,c){return arguments.length<3&&console.error("Handlebars#equals helper expect 2 arguments"),a===b?c.fn(this):c.inverse(this)},RQ.HandlebarHelpers.GreaterThanHelper=function(a,b,c){return arguments.length<3&&console.error("Handlebars#gt helper expect 2 arguments"),a>b?c.fn(this):c.inverse(this)},RQ.HandlebarHelpers.toLowerCaseHelper=function(a){return a&&"string"==typeof a?a.toLowerCase():""},RQ.HandlebarHelpers.charAtHelper=function(a,b){return a&&"string"==typeof a?a.charAt(b):""},RQ.HandlebarHelpers.formatDate=function(a){var b=new Date(Number(a));return b=b.toUTCString().split(" "),b=b[1]+" "+b[2]+", "+b[3]},RQ.HandlebarHelpers.readGlobalVar=function(a){var b=RQ;a=a.split(".");for(var c=1;c<a.length;c++)b=b[a[c]];return b},RQ.HandlebarHelpers.equalsGlobalVar=function(a,b,c){return RQ.HandlebarHelpers.readGlobalVar(a)===b?c.fn(this):c.inverse(this)},RQ.HandlebarHelpers.unequalsGlobalVar=function(a,b,c){return RQ.HandlebarHelpers.readGlobalVar(a)!==b?c.fn(this):c.inverse(this)},RQ.HandlebarHelpers.eachGlobalVar=function(a,b){var c=RQ.HandlebarHelpers.readGlobalVar(a);return Handlebars.helpers.each.call(this,c,b)},RQ.HandlebarHelpers.concat=function(){return Array.prototype.slice.call(arguments,0,arguments.length-1).join("")},RQ.HandlebarHelpers.contains=function(a,b,c){return a&&a.indexOf(b)>-1?c.fn(this):c.inverse(this)},RQ.HandlebarHelpers.subtract=function(a,b){return parseFloat(a)-parseFloat(b)},RQ.HandlebarHelpers.getRuleIconClass=function(a){switch(a){case RQ.RULE_TYPES.REDIRECT:return"fa fa-random";case RQ.RULE_TYPES.CANCEL:return"fa fa-ban";case RQ.RULE_TYPES.REPLACE:return"fa fa-exchange";case RQ.RULE_TYPES.HEADERS:return"fa fa-header";case RQ.RULE_TYPES.USERAGENT:return"fa fa-tablet";case RQ.RULE_TYPES.SCRIPT:return"fa fa-code"}},Handlebars.registerHelper("debug",RQ.HandlebarHelpers.DebugHelper),Handlebars.registerHelper("equals",RQ.HandlebarHelpers.EqualsHelper),Handlebars.registerHelper("gt",RQ.HandlebarHelpers.GreaterThanHelper),Handlebars.registerHelper("toLowerCase",RQ.HandlebarHelpers.toLowerCaseHelper),Handlebars.registerHelper("formatDate",RQ.HandlebarHelpers.formatDate),Handlebars.registerHelper("charAt",RQ.HandlebarHelpers.charAtHelper),Handlebars.registerHelper("readGlobalVar",RQ.HandlebarHelpers.readGlobalVar),Handlebars.registerHelper("equalsGlobalVar",RQ.HandlebarHelpers.equalsGlobalVar),Handlebars.registerHelper("unequalsGlobalVar",RQ.HandlebarHelpers.unequalsGlobalVar),Handlebars.registerHelper("eachGlobalVar",RQ.HandlebarHelpers.eachGlobalVar),Handlebars.registerHelper("concat",RQ.HandlebarHelpers.concat),Handlebars.registerHelper("contains",RQ.HandlebarHelpers.contains),Handlebars.registerHelper("subtract",RQ.HandlebarHelpers.subtract),Handlebars.registerHelper("getRuleIconClass",RQ.HandlebarHelpers.getRuleIconClass),RQ.TemplateHelpers.commonHelper=function(a){return a.RULE_STATUS=RQ.RULE_STATUS,a.RULE_OPERATORS=RQ.RULE_OPERATORS,a},RQ.TemplateHelpers.placeholders={SOURCE_EQUALS:"e.g. http://www.example.com",SOURCE_CONTAINS:"e.g. google",SOURCE_MATCHES:"e.g. /example-([0-9]+)/ig",SOURCE_WILDCARD_MATCHES:"e.g. *://*.mydomain.com/* (Each * can be replaced with respective $ in destination)",DESTINATION_MATCHES:"e.g. http://www.new-example.com?queryParam=$1&searchParam=$2",DESTINATION_WILDCARD_MATCHES:"e.g. $1://$2.newdomain.com/$3"},RQ.TemplateHelpers.getPlaceholder=function(a){var b=(a.field||"").toUpperCase(),c=(a.operator||"").toUpperCase();return this.placeholders[b+"_"+c]||"e.g. http://www.new-example.com"},RQ.TemplateHelpers.redirectRuleHelper=function(a){return a=this.commonHelper(a),_.each(a.pairs,function(a){a.sourcePlaceholder=this.getPlaceholder({field:"source",operator:a.source.operator}),a.destinationPlaceholder=this.getPlaceholder({field:"destination",operator:a.source.operator})},this),a},this.RQ=this.RQ||{},this.RQ.Templates=this.RQ.Templates||{},Handlebars.registerPartial("AddPairCTA",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<button type="button" class="right btn btn-default add-pair">\n  <i class="fa fa-plus-circle"></i>\n  <span>New</span>\n</button>'},useData:!0})),Handlebars.registerPartial("DropdownButton",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<button class="btn dropdown-toggle" type="button" data-toggle="dropdown">\n  <span class="dropdown-value" data-value="">Select</span>\n</button>'},useData:!0})),Handlebars.registerPartial("PairsContainerHeading",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f;return'<div class="title">\n  <span>'+this.escapeExpression((f=null!=(f=b.heading||(null!=a?a.heading:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"heading",hash:{},data:d}):f))+"</span>\n"+(null!=(e=this.invokePartial(c.AddPairCTA,a,{name:"AddPairCTA",data:d,indent:"  ",helpers:b,partials:c}))?e:"")+"</div>\n"},usePartial:!0,useData:!0})),Handlebars.registerPartial("RuleEditorHeader",Handlebars.template({1:function(a,b,c,d){var e;return'        <div class="rule-status-container">\n          <strong class="margin-r-0-5">Status</strong>\n'+(null!=(e=this.invokePartial(c.StatusToggle,a,{name:"StatusToggle",data:d,indent:"          ",helpers:b,partials:c}))?e:"")+"        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f;return'<nav class="content-header">\n  <div class="row text-center">\n    <div class="col-md-5 text-left">\n      <span>'+this.escapeExpression((f=null!=(f=b.heading||(null!=a?a.heading:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"heading",hash:{},data:d}):f))+'</span>\n    </div>\n\n    <div class="col-md-4">\n'+(null!=(e=b.unless.call(a,null!=a?a.isViewMode:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'    </div>\n\n    <div class="col-md-3 text-right">\n'+(null!=(e=this.invokePartial(c.SaveRuleCTA,a,{name:"SaveRuleCTA",data:d,indent:"      ",helpers:b,partials:c}))?e:"")+"    </div>\n  </div>\n</nav>\n"},usePartial:!0,useData:!0})),Handlebars.registerPartial("RuleItemRow",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression,i="function";return'<tr class="rule-item-row item-row '+h((b.toLowerCase||a&&a.toLowerCase||g).call(a,null!=a?a.ruleType:a,{name:"toLowerCase",hash:{},data:d}))+'" data-id="'+h((f=null!=(f=b.id||(null!=a?a.id:a))?f:g,typeof f===i?f.call(a,{name:"id",hash:{},data:d}):f))+'">\n  <td class="item-selection-cell">\n    <input type="checkbox" class="filled-in select-row-checkbox" id="filled-in-box-'+h((f=null!=(f=b.id||(null!=a?a.id:a))?f:g,typeof f===i?f.call(a,{name:"id",hash:{},data:d}):f))+'" title="Select Rule"/>\n    <label for="filled-in-box-'+h((f=null!=(f=b.id||(null!=a?a.id:a))?f:g,typeof f===i?f.call(a,{name:"id",hash:{},data:d}):f))+'"></label>\n  </td>\n\n  <td class="rule-badge-cell">\n    <span class="rule-type badge">\n      <i class="'+h((b.getRuleIconClass||a&&a.getRuleIconClass||g).call(a,null!=a?a.ruleType:a,{name:"getRuleIconClass",hash:{},data:d}))+'" title="'+h((f=null!=(f=b.ruleType||(null!=a?a.ruleType:a))?f:g,typeof f===i?f.call(a,{name:"ruleType",hash:{},data:d}):f))+' Rule"></i>\n    </span>\n  </td>\n\n  <td class="rule-name-cell">\n    <a class="ruleName">'+h((f=null!=(f=b.name||(null!=a?a.name:a))?f:g,typeof f===i?f.call(a,{name:"name",hash:{},data:d}):f))+'</a>\n    <div class="ruleDescription">'+h((f=null!=(f=b.description||(null!=a?a.description:a))?f:g,typeof f===i?f.call(a,{name:"description",hash:{},data:d}):f))+'</div>\n  </td>\n\n  <td class="status-cell"> '+(null!=(e=this.invokePartial(c.StatusToggle,a,{name:"StatusToggle",data:d,helpers:b,partials:c}))?e:"")+" </td>\n\n  <td>"+h((b.formatDate||a&&a.formatDate||g).call(a,null!=a?a.creationDate:a,{name:"formatDate",hash:{},data:d}))+"</td>\n</tr>"},usePartial:!0,useData:!0})),Handlebars.registerPartial("RuleProperties",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression;return'<div class="row">\n  <div class="col-md-4 input-field name-container md-form form-sm">\n    <input type="text" class="rule-name-input" value="'+g((e=null!=(e=b.name||(null!=a?a.name:a))?e:f,"function"==typeof e?e.call(a,{name:"name",hash:{},data:d}):e))+'" placeholder="Rule Name">\n  </div>\n\n  <div class="col-md-1"></div>\n\n  <div class="col-md-7 input-field description-container md-form form-sm">\n    <input type="text" class="rule-description" value="'+g((e=null!=(e=b.description||(null!=a?a.description:a))?e:f,"function"==typeof e?e.call(a,{name:"description",hash:{},data:d}):e))+'" placeholder="Description (optional)">\n  </div>\n</div>\n'},useData:!0})),Handlebars.registerPartial("SaveRuleCTA",Handlebars.template({1:function(a,b,c,d){return'  <a class="btn save-rule">Save</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return(null!=(e=b.unless.call(a,null!=a?a.isViewMode:a,{name:"unless",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'<a class="btn btn-default close-editor">Close</a>\n'},useData:!0})),Handlebars.registerPartial("SharedListIndexToolbar",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<nav class="content-header">\n  <span>Shared List</span>\n\n  <div class="right right-corner-icongroup">\n    <a class="btn-floating btn-small waves-effect waves-light delete-items-button action-button"\n       data-toggle="tooltip" data-placement="bottom" data-original-title="Delete">\n      <i class="fa fa-trash"></i>\n    </a>\n  </div>\n</nav>\n'},useData:!0})),Handlebars.registerPartial("SharedListItemRow",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'<tr class="list-item-row item-row" data-index="'+h((e=null!=(e=b.index||d&&d.index)?e:f,typeof e===g?e.call(a,{name:"index",hash:{},data:d}):e))+'" data-id="'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===g?e.call(a,{name:"id",hash:{},data:d}):e))+'">\n  <td class="item-selection-cell">\n    <input type="checkbox" class="filled-in select-row-checkbox" id="filled-in-box-'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===g?e.call(a,{name:"id",hash:{},data:d}):e))+'" title="Select Rule"/>\n    <label for="filled-in-box-'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===g?e.call(a,{name:"id",hash:{},data:d}):e))+'"></label>\n  </td>\n\n  <td class="list-name-cell">'+h((e=null!=(e=b.listName||(null!=a?a.listName:a))?e:f,typeof e===g?e.call(a,{name:"listName",hash:{},data:d}):e))+'</td>\n\n  <td class="url-cell"><a href="'+h((e=null!=(e=b.sharedUrl||(null!=a?a.sharedUrl:a))?e:f,typeof e===g?e.call(a,{name:"sharedUrl",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.sharedUrl||(null!=a?a.sharedUrl:a))?e:f,typeof e===g?e.call(a,{name:"sharedUrl",hash:{},data:d}):e))+'</a> </td>\n\n  <td class="row-actions text-center">\n    <a class="copy-action" data-clipboard-text="'+h((e=null!=(e=b.sharedUrl||(null!=a?a.sharedUrl:a))?e:f,typeof e===g?e.call(a,{name:"sharedUrl",hash:{},data:d}):e))+'">\n      <i class="fa fa-files-o" aria-hidden="true"></i>\n    </a>\n  </td>\n\n  <td>'+h((b.formatDate||a&&a.formatDate||f).call(a,null!=a?a.creationDate:a,{name:"formatDate",hash:{},data:d}))+"</td>\n</tr>\n"},useData:!0})),Handlebars.registerPartial("SharedRuleItemRow",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression,h="function";return'<tr class="rule-item-row '+g((b.toLowerCase||a&&a.toLowerCase||f).call(a,null!=a?a.ruleType:a,{name:"toLowerCase",hash:{},data:d}))+'" data-index="'+g((e=null!=(e=b.index||d&&d.index)?e:f,typeof e===h?e.call(a,{name:"index",hash:{},data:d}):e))+'">\n  <td class="rule-badge-cell">\n    <span class="rule-type badge">\n      <i class="'+g((b.getRuleIconClass||a&&a.getRuleIconClass||f).call(a,null!=a?a.ruleType:a,{name:"getRuleIconClass",hash:{},data:d}))+'" title="'+g((e=null!=(e=b.ruleType||(null!=a?a.ruleType:a))?e:f,typeof e===h?e.call(a,{name:"ruleType",hash:{},data:d}):e))+' Rule"></i>\n    </span>\n  </td>\n\n  <td class="rule-name-cell">\n    <a class="ruleName">'+g((e=null!=(e=b.name||(null!=a?a.name:a))?e:f,typeof e===h?e.call(a,{name:"name",hash:{},data:d}):e))+'</a>\n    <div class="ruleDescription">'+g((e=null!=(e=b.description||(null!=a?a.description:a))?e:f,typeof e===h?e.call(a,{name:"description",hash:{},data:d}):e))+'</div>\n  </td>\n\n  <td class="status-cell"> '+g((e=null!=(e=b.status||(null!=a?a.status:a))?e:f,typeof e===h?e.call(a,{name:"status",hash:{},data:d}):e))+" </td>\n\n  <td>"+g((b.formatDate||a&&a.formatDate||f).call(a,null!=a?a.creationDate:a,{name:"formatDate",hash:{},data:d}))+"</td>\n</tr>\n"},useData:!0})),Handlebars.registerPartial("SharedRulesIndexToolbar",Handlebars.template({1:function(a,b,c,d){return"disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'<nav class="content-header">\n  <span>Shared Rules</span>\n  <div class="right right-corner-actions">\n    <a class="import-rules-button action-button btn btn-primary" '+(null!=(e=(b.equals||a&&a.equals||b.helperMissing).call(a,null!=(e=null!=a?a.rules:a)?e.length:e,0,{name:"equals",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+">Import List</a>\n  </div>\n</nav>\n"},useData:!0})),Handlebars.registerPartial("SourceField",Handlebars.template({1:function(a,b,c,d){return"selected"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression;return'<div class="source-container">\n  <label class="active">Source</label>\n\n  \x3c!-- Write the dropdown here --\x3e\n  <div class="source-key-container">\n    <div class="dropdown-container">\n      <div class="dropdown" data-key="source.key">\n\n'+(null!=(e=this.invokePartial(c.DropdownButton,a,{name:"DropdownButton",data:d,indent:"        ",helpers:b,partials:c}))?e:"")+'\n        <ul class="dropdown-menu">\n          <li>\n            <a class="dropdown-item"\n               data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.RULE_KEYS.URL",{name:"readGlobalVar",hash:{},data:d}))+'"\n               '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.RULE_KEYS.URL",null!=(e=null!=a?a.source:a)?e.key:e,{name:"equalsGlobalVar",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Url</a>\n          </li>\n          <li>\n            <a class="dropdown-item"\n               data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.RULE_KEYS.HOST",{name:"readGlobalVar",hash:{},data:d}))+'"\n               '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.RULE_KEYS.HOST",null!=(e=null!=a?a.source:a)?e.key:e,{name:"equalsGlobalVar",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Host</a>\n          </li>\n          <li>\n            <a class="dropdown-item"\n               data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.RULE_KEYS.PATH",{name:"readGlobalVar",hash:{},data:d}))+'"\n               '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.RULE_KEYS.PATH",null!=(e=null!=a?a.source:a)?e.key:e,{name:"equalsGlobalVar",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Path</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <div class="source-operator-container">\n    <div class="dropdown-container">\n      <div class="dropdown" data-key="source.operator">\n\n'+(null!=(e=this.invokePartial(c.DropdownButton,a,{name:"DropdownButton",data:d,indent:"        ",helpers:b,partials:c}))?e:"")+'\n        <ul class="dropdown-menu">\n          <li>\n            <a class="dropdown-item"\n               data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.RULE_OPERATORS.EQUALS",{name:"readGlobalVar",hash:{},data:d}))+'"\n               '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.RULE_OPERATORS.EQUALS",null!=(e=null!=a?a.source:a)?e.operator:e,{name:"equalsGlobalVar",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Equals</a>\n          </li>\n          <li>\n            <a class="dropdown-item"\n               data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.RULE_OPERATORS.CONTAINS",{name:"readGlobalVar",hash:{},data:d
}))+'"\n               '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.RULE_OPERATORS.CONTAINS",null!=(e=null!=a?a.source:a)?e.operator:e,{name:"equalsGlobalVar",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Contains</a>\n          </li>\n          <li>\n            <a class="dropdown-item"\n               data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.RULE_OPERATORS.MATCHES",{name:"readGlobalVar",hash:{},data:d}))+'"\n               '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.RULE_OPERATORS.MATCHES",null!=(e=null!=a?a.source:a)?e.operator:e,{name:"equalsGlobalVar",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Matches (regex)</a>\n          </li>\n          <li>\n            <a class="dropdown-item"\n               data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.RULE_OPERATORS.WILDCARD_MATCHES",{name:"readGlobalVar",hash:{},data:d}))+'"\n               '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.RULE_OPERATORS.WILDCARD_MATCHES",null!=(e=null!=a?a.source:a)?e.operator:e,{name:"equalsGlobalVar",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'>Matches (wildcard)</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <input type="text" class="form-control source-value-input" data-key="source.value" value="'+h(this.lambda(null!=(e=null!=a?a.source:a)?e.value:e,a))+'" placeholder="'+h((f=null!=(f=b.sourcePlaceholder||(null!=a?a.sourcePlaceholder:a))?f:g,"function"==typeof f?f.call(a,{name:"sourcePlaceholder",hash:{},data:d}):f))+'" />\n\n  <span class="fa fa-trash-o delete-pair action-icon"></span>\n</div>'},usePartial:!0,useData:!0})),Handlebars.registerPartial("StatusToggle",Handlebars.template({1:function(a,b,c,d){return"checked"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'\x3c!-- Switch --\x3e\n<span class="switch square">\n  <label>\n    Off\n    <input type="checkbox" class="status-toggle" '+(null!=(e=(b.equals||a&&a.equals||b.helperMissing).call(a,null!=a?a.status:a,"Active",{name:"equals",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+' />\n    <span class="lever"></span>\n    On\n  </label>\n</span>\n'},useData:!0})),Handlebars.registerPartial("Toolbar",Handlebars.template({1:function(a,b,c,d){return'      <a class="btn-floating btn-small waves-effect waves-light blue export-rules-button action-button"\n         data-toggle="tooltip" data-placement="bottom" data-original-title="Download Rules">\n        <i class="fa fa-download"></i>\n      </a>\n'},3:function(a,b,c,d){return'      <a class="btn-floating btn-small waves-effect waves-light share-rules-button action-button"\n         data-toggle="tooltip" data-placement="bottom" data-original-title="Share">\n        <i class="fa fa-share-alt"></i>\n      </a>\n\n      <a class="btn-floating btn-small waves-effect waves-light delete-items-button action-button"\n         data-toggle="tooltip" data-placement="bottom" data-original-title="Delete">\n        <i class="fa fa-trash"></i>\n      </a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing;return'<nav class="content-header">\n  <span>Rules</span>\n  <div class="right right-corner-icongroup">\n\n    <a href="#selectRule" class="btn-floating btn-small btn-success waves-effect waves-light select-rule-button action-button">\n      <i class="fa fa-plus"></i>\n    </a>\n\n'+(null!=(e=(b.gt||a&&a.gt||f).call(a,null!=(e=null!=a?a.rules:a)?e.length:e,0,{name:"gt",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'\n    <a class="btn-floating btn-small waves-effect waves-light blue import-rules-button action-button"\n       data-toggle="tooltip" data-placement="bottom" data-original-title="Upload Rules">\n      <i class="fa fa-upload"></i>\n    </a>\n\n'+(null!=(e=(b.gt||a&&a.gt||f).call(a,null!=(e=null!=a?a.rules:a)?e.length:e,0,{name:"gt",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+'\n\n    <div class="notification-container"></div>\n  </div>\n</nav>\n'},useData:!0})),this.RQ.Templates.CancelRuleEditor=Handlebars.template({1:function(a,b,c,d){var e,f;return'      <div class="well pair-container" data-index="'+this.escapeExpression((f=null!=(f=b.index||d&&d.index)?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"index",hash:{},data:d}):f))+'">\n'+(null!=(e=this.invokePartial(c.SourceField,a,{name:"SourceField",data:d,indent:"        ",helpers:b,partials:c}))?e:"")+"      </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return(null!=(e=this.invokePartial(c.RuleEditorHeader,a,{name:"RuleEditorHeader",hash:{heading:"Block/Cancel Network Requests"},data:d,helpers:b,partials:c}))?e:"")+'\n<section class="rule-body content-body">\n'+(null!=(e=this.invokePartial(c.RuleProperties,a,{name:"RuleProperties",data:d,indent:"  ",helpers:b,partials:c}))?e:"")+"\n"+(null!=(e=this.invokePartial(c.PairsContainerHeading,a,{name:"PairsContainerHeading",hash:{heading:"Enter Keywords or Urls or Domains to be blocked"},data:d,indent:"  ",helpers:b,partials:c}))?e:"")+'  <div class="pairs-container">\n'+(null!=(e=b.each.call(a,null!=a?a.pairs:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"  </div>\n</section>"},usePartial:!0,useData:!0}),this.RQ.Templates.HeadersRuleTemplate=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression;return'        <div class="well pair-container" data-index="'+h((f=null!=(f=b.index||d&&d.index)?f:g,"function"==typeof f?f.call(a,{name:"index",hash:{},data:d}):f))+'">\n          <div>\n\n            <div class="header-modification-type-container">\n              <div class="dropdown-container">\n                <div class="dropdown" data-key="type">\n\n'+(null!=(e=this.invokePartial(c.DropdownButton,a,{name:"DropdownButton",data:d,indent:"                  ",helpers:b,partials:c}))?e:"")+'\n                  <ul class="dropdown-menu">\n                    <li>\n                      <a class="dropdown-item"\n                         data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.MODIFICATION_TYPES.ADD",{name:"readGlobalVar",hash:{},data:d}))+'"\n                         '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.MODIFICATION_TYPES.ADD",null!=a?a.type:a,{name:"equalsGlobalVar",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+'>Add</a>\n                    </li>\n                    <li>\n                      <a class="dropdown-item"\n                         data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.MODIFICATION_TYPES.REMOVE",{name:"readGlobalVar",hash:{},data:d}))+'"\n                         '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.MODIFICATION_TYPES.REMOVE",null!=a?a.type:a,{name:"equalsGlobalVar",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+'>Remove</a>\n                    </li>\n                    <li>\n                      <a class="dropdown-item"\n                         data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.MODIFICATION_TYPES.MODIFY",{name:"readGlobalVar",hash:{},data:d}))+'"\n                         '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.MODIFICATION_TYPES.MODIFY",null!=a?a.type:a,{name:"equalsGlobalVar",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+'>Modify</a>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            <div class="header-target-container">\n              <div class="dropdown-container">\n                <div class="dropdown" data-key="target">\n\n'+(null!=(e=this.invokePartial(c.DropdownButton,a,{name:"DropdownButton",data:d,indent:"                  ",helpers:b,partials:c}))?e:"")+'\n                  <ul class="dropdown-menu">\n                    <li>\n                      <a class="dropdown-item"\n                         data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.HEADERS_TARGET.REQUEST",{name:"readGlobalVar",hash:{},data:d}))+'"\n                         '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.HEADERS_TARGET.REQUEST",null!=a?a.target:a,{name:"equalsGlobalVar",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+'>Request</a>\n                    </li>\n                    <li>\n                      <a class="dropdown-item"\n                         data-value="'+h((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.HEADERS_TARGET.RESPONSE",{name:"readGlobalVar",hash:{},data:d}))+'"\n                         '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.HEADERS_TARGET.RESPONSE",null!=a?a.target:a,{name:"equalsGlobalVar",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+'>Response</a>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            <div class="input-group header-name-input-group">\n              <span class="input-group-addon">Header</span>\n              <input type="text" class="form-control header-input" data-key="header" placeholder="Header Name" value="'+h((f=null!=(f=b.header||(null!=a?a.header:a))?f:g,"function"==typeof f?f.call(a,{name:"header",hash:{},data:d}):f))+'">\n            </div>\n\n'+(null!=(e=(b.unequalsGlobalVar||a&&a.unequalsGlobalVar||g).call(a,"RQ.MODIFICATION_TYPES.REMOVE",null!=a?a.type:a,{name:"unequalsGlobalVar",hash:{},fn:this.program(4,d,0),inverse:this.noop,data:d}))?e:"")+"          </div>\n\n"+(null!=(e=this.invokePartial(c.SourceField,a,{name:"SourceField",hash:{sourcePlaceholder:"Leave this field Empty to apply above modification to all urls"},data:d,indent:"          ",helpers:b,partials:c}))?e:"")+"        </div>\n"},2:function(a,b,c,d){return"selected"},4:function(a,b,c,d){var e;return'              <div class="input-group header-value-input-group">\n                <span class="input-group-addon">Value</span>\n                <input type="text" class="form-control value-input" data-key="value" placeholder="Header Value" value="'+this.escapeExpression((e=null!=(e=b.value||(null!=a?a.value:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"value",hash:{},data:d}):e))+'"/>\n              </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return(null!=(e=this.invokePartial(c.RuleEditorHeader,a,{name:"RuleEditorHeader",hash:{heading:"Modify Headers in HTTP Request and Response"},data:d,helpers:b,partials:c}))?e:"")+'\n<section class="rule-body content-body">\n\n\n'+(null!=(e=this.invokePartial(c.RuleProperties,a,{name:"RuleProperties",data:d,indent:"  ",helpers:b,partials:c}))?e:"")+"\n"+(null!=(e=this.invokePartial(c.PairsContainerHeading,a,{name:"PairsContainerHeading",hash:{heading:"Headers Modification Rules"},data:d,indent:"  ",helpers:b,partials:c}))?e:"")+'\n  <div class="pairs-container">\n\n'+(null!=(e=b.each.call(a,null!=a?a.pairs:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"  </div>\n</section>\n"},usePartial:!0,useData:!0}),this.RQ.Templates.Modal=Handlebars.template({1:function(a,b,c,d){return'        <button type="button" class="btn btn-link" data-dismiss="modal">Cancel</button>\n'},3:function(a,b,c,d){var e;return'        <button type="button" class="btn btn-link btn-primary">'+this.escapeExpression(this.lambda(null!=(e=null!=a?a.primaryButton:a)?e.name:e,a))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression;return'<div class="modal-dialog">\n\n  \x3c!-- Modal content--\x3e\n  <div class="modal-content">\n    <div class="modal-header">\n      <h4>'+h((f=null!=(f=b.heading||(null!=a?a.heading:a))?f:g,"function"==typeof f?f.call(a,{name:"heading",hash:{},data:d}):f))+'</h4>\n    </div>\n\n    <div class="modal-body">\n      <p>'+h((f=null!=(f=b.content||(null!=a?a.content:a))?f:g,"function"==typeof f?f.call(a,{name:"content",hash:{},data:d}):f))+'</p>\n    </div>\n\n    <div class="modal-footer text-right">\n'+(null!=(e=b.if.call(a,null!=a?a.cancelButton:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+(null!=(e=b.if.call(a,null!=a?a.primaryButton:a,{name:"if",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+"    </div>\n\n  </div> \x3c!-- /modal-content --\x3e\n</div>\n"},useData:!0}),this.RQ.Templates.PushNotification=Handlebars.template({1:function(a,b,c,d){return"hasNotifications"},3:function(a,b,c,d){var e;return'      <span class="badge unread-notifications-badge">'+this.escapeExpression((e=null!=(e=b.unReadNotificationsCount||(null!=a?a.unReadNotificationsCount:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"unReadNotificationsCount",hash:{},data:d}):e))+"</span>\n"},5:function(a,b,c,d){return'    <span class="new new-text-badge danger-color">New</span>\n'},7:function(a,b,c,d){return'          <span class="mark-all-read-action">Mark All as Read</span>\n'},9:function(a,b,c,d){return"          <span>Close</span>\n"},11:function(a,b,c,d){var e;return null!=(e=b.each.call(a,null!=a?a.items:a,{name:"each",hash:{},fn:this.program(12,d,0),inverse:this.noop,data:d}))?e:""},12:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression;return'        <li class="dropdown-divider"></li>\n\n        <li class="dropdown-item '+(null!=(e=(b.equals||a&&a.equals||g).call(a,null!=a?a.isRead:a,!1,{name:"equals",hash:{},fn:this.program(13,d,0),inverse:this.noop,data:d}))?e:"")+'">\n          <div class="row">\n            <div class="col-md-2 ntf-type-container">\n              <span class="badge badge-'+h((f=null!=(f=b.type||(null!=a?a.type:a))?f:g,"function"==typeof f?f.call(a,{name:"type",hash:{},data:d}):f))+'">'+h((f=null!=(f=b.label||(null!=a?a.label:a))?f:g,"function"==typeof f?f.call(a,{name:"label",hash:{},data:d}):f))+'</span>\n            </div>\n            <div class="ntf-content col-md-10">'+(null!=(f=null!=(f=b.content||(null!=a?a.content:a))?f:g,e="function"==typeof f?f.call(a,{name:"content",hash:{},data:d}):f)?e:"")+"</div>\n          </div>\n        </li>\n"},13:function(a,b,c,d){return"unread"},15:function(a,b,c,d){return'      <li class="no-notifications-item dropdown-item">Yo! Nothing to catch up</li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing;return'<div class="btn-group">\n  <a class="btn-floating btn-small notifications-button action-button dropdown-toggle '+(null!=(e=(b.gt||a&&a.gt||f).call(a,null!=a?a.unReadNotificationsCount:a,0,{name:"gt",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+'"\n     data-toggle="dropdown"\n     aria-haspopup="true"\n     aria-expanded="false">\n    <i class="fa fa-bell"></i>\n'+(null!=(e=(b.gt||a&&a.gt||f).call(a,null!=a?a.unReadNotificationsCount:a,0,{name:"gt",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+"  </a>\n\n"+(null!=(e=(b.gt||a&&a.gt||f).call(a,null!=a?a.unReadNotificationsCount:a,0,{name:"gt",hash:{},fn:this.program(5,d,0),inverse:this.noop,data:d}))?e:"")+'\n  <ul class="dropdown-menu">\n    <li class="notifications-header">\n      <h6>Notifications</h6>\n'+(null!=(e=(b.gt||a&&a.gt||f).call(a,null!=a?a.unReadNotificationsCount:a,0,{name:"gt",hash:{},fn:this.program(7,d,0),inverse:this.program(9,d,0),data:d}))?e:"")+"    </li>\n\n"+(null!=(e=(b.gt||a&&a.gt||f).call(a,null!=(e=null!=a?a.items:a)?e.length:e,0,{name:"gt",hash:{},fn:this.program(11,d,0),inverse:this.program(15,d,0),data:d}))?e:"")+"  </ul>\n</div>\n"},useData:!0}),this.RQ.Templates.RedirectRuleEditor=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression;return'      <div class="well pair-container" data-index="'+h((f=null!=(f=b.index||d&&d.index)?f:g,"function"==typeof f?f.call(a,{name:"index",hash:{},data:d}):f))+'">\n'+(null!=(e=this.invokePartial(c.SourceField,a,{name:"SourceField",data:d,indent:"        ",helpers:b,partials:c}))?e:"")+'\n        <div class="destination-container">\n          <label class="active">Destination</label>\n          <input type="url" class="destination-url-input form-control" data-key="destination" value="'+h((f=null!=(f=b.destination||(null!=a?a.destination:a))?f:g,"function"==typeof f?f.call(a,{name:"destination",hash:{},data:d}):f))+'"\n                   placeholder="'+h((f=null!=(f=b.destinationPlaceholder||(null!=a?a.destinationPlaceholder:a))?f:g,"function"==typeof f?f.call(a,{name:"destinationPlaceholder",hash:{},data:d}):f))+'">\n        </div>\n      </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return(null!=(e=this.invokePartial(c.RuleEditorHeader,a,{name:"RuleEditorHeader",hash:{heading:"Redirect Request Rule"},data:d,helpers:b,partials:c}))?e:"")+'\n<section class="rule-body content-body">\n'+(null!=(e=this.invokePartial(c.RuleProperties,a,{name:"RuleProperties",data:d,indent:"  ",helpers:b,partials:c}))?e:"")+"\n"+(null!=(e=this.invokePartial(c.PairsContainerHeading,a,{name:"PairsContainerHeading",hash:{heading:"Source Destination Pairs"},data:d,indent:"  ",helpers:b,partials:c}))?e:"")+'\n  <div class="pairs-container">\n'+(null!=(e=b.each.call(a,null!=a?a.pairs:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"  </div>\n</section>\n"},usePartial:!0,useData:!0}),this.RQ.Templates.ReplaceRuleEditor=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression;return'      <div class="well pair-container" data-index="'+h((f=null!=(f=b.index||d&&d.index)?f:g,"function"==typeof f?f.call(a,{name:"index",hash:{},data:d}):f))+'">\n        <div class="from-to-container">\n          <div class="input-group from-input-group">\n            <span class="input-group-addon">Replace</span>\n            <input type="text" class="form-control from-input" data-key="from" placeholder="This part in URL" value="'+h((f=null!=(f=b.from||(null!=a?a.from:a))?f:g,"function"==typeof f?f.call(a,{name:"from",hash:{},data:d}):f))+'">\n          </div>\n\n          <div class="input-group to-input-group">\n            <span class="input-group-addon">With</span>\n            <input type="text" class="form-control to-input" data-key="to" placeholder="Will be replaced by this string" value="'+h((f=null!=(f=b.to||(null!=a?a.to:a))?f:g,"function"==typeof f?f.call(a,{name:"to",hash:{},data:d}):f))+'">\n          </div>\n        </div>\n'+(null!=(e=this.invokePartial(c.SourceField,a,{name:"SourceField",hash:{sourcePlaceholder:"Leave this field Empty to apply above modification to all urls"},data:d,indent:"        ",helpers:b,partials:c}))?e:"")+"      </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return(null!=(e=this.invokePartial(c.RuleEditorHeader,a,{name:"RuleEditorHeader",hash:{heading:"Replace Host or some part of URL"},data:d,helpers:b,partials:c}))?e:"")+'\n<section class="rule-body content-body">\n'+(null!=(e=this.invokePartial(c.RuleProperties,a,{name:"RuleProperties",data:d,indent:"  ",helpers:b,partials:c}))?e:"")+"\n"+(null!=(e=this.invokePartial(c.PairsContainerHeading,a,{name:"PairsContainerHeading",hash:{heading:"Pairs"},data:d,indent:"  ",helpers:b,partials:c}))?e:"")+'\n  <div class="pairs-container">\n'+(null!=(e=b.each.call(a,null!=a?a.pairs:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"  </div>\n</section>"},usePartial:!0,useData:!0}),this.RQ.Templates.RuleCardsView=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e=b.helperMissing,f=this.escapeExpression;return'<nav class="content-header rq-dimgrey">\n  <a href="#" role="button" class="back-button fa fa-chevron-left" title="Go Back"></a>\n  <span>Select Rule</span>\n</nav>\n\n<section class="rule-cards content-body">\n  <div class="row">\n    <div class="col-md-4 card-redirect-rule rule-card" data-target="#new/Redirect">\n      <div class="card testimonial-card z-depth-1 hoverable">\n        <div class="card-up">\n        </div>\n        <div class="avatar">\n          <i class="rounded-circle img-responsive card-avatar-content '+f((b.getRuleIconClass||a&&a.getRuleIconClass||e).call(a,(b.readGlobalVar||a&&a.readGlobalVar||e).call(a,"RQ.RULE_TYPES.REDIRECT",{name:"readGlobalVar",hash:{},data:d}),{name:"getRuleIconClass",hash:{},data:d}))+'"></i>\n        </div>\n        <div class="card-body">\n          <h4 class="card-title">Redirect Request</h4>\n          <p class="card-text"><i class="fa fa-quote-left"></i>Redirect a request URL</p>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-md-4 card-cancel-rule rule-card" data-target="#new/Cancel">\n      <div class="card testimonial-card z-depth-1 hoverable">\n        <div class="card-up">\n        </div>\n        <div class="avatar">\n          <i class="rounded-circle img-responsive card-avatar-content bigger '+f((b.getRuleIconClass||a&&a.getRuleIconClass||e).call(a,(b.readGlobalVar||a&&a.readGlobalVar||e).call(a,"RQ.RULE_TYPES.CANCEL",{name:"readGlobalVar",hash:{},data:d}),{name:"getRuleIconClass",hash:{},data:d}))+'"></i>\n        </div>\n        <div class="card-body">\n          <h4 class="card-title">Cancel Request</h4>\n          <p class="card-text"><i class="fa fa-quote-left"></i>Block Urls by specifying keywords or entire Urls</p>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-md-4 card-replace-rule rule-card" data-target="#new/Replace">\n      <div class="card testimonial-card z-depth-1 hoverable">\n        <div class="card-up">\n        </div>\n        <div class="avatar">\n          <i class="rounded-circle img-responsive card-avatar-content '+f((b.getRuleIconClass||a&&a.getRuleIconClass||e).call(a,(b.readGlobalVar||a&&a.readGlobalVar||e).call(a,"RQ.RULE_TYPES.REPLACE",{name:"readGlobalVar",hash:{},data:d}),{name:"getRuleIconClass",hash:{},data:d}))+'"></i>\n        </div>\n        <div class="card-body">\n          <h4 class="card-title">Replace Host</h4>\n          <p class="card-text"><i class="fa fa-quote-left"></i>Replace parts of URL like hostname, query value</p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-4 card-headers-rule rule-card" data-target="#new/headers">\n      <div class="card testimonial-card z-depth-1 hoverable">\n        <div class="card-up">\n        </div>\n        <div class="avatar">\n          <i class="rounded-circle img-responsive card-avatar-content '+f((b.getRuleIconClass||a&&a.getRuleIconClass||e).call(a,(b.readGlobalVar||a&&a.readGlobalVar||e).call(a,"RQ.RULE_TYPES.HEADERS",{name:"readGlobalVar",hash:{},data:d}),{name:"getRuleIconClass",hash:{},data:d}))+'"></i>\n        </div>\n        <div class="card-body">\n          <h4 class="card-title">Modify Headers</h4>\n          <p class="card-text"><i class="fa fa-quote-left"></i>Modify HTTP headers in request and response</p>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-md-4 card-useragent-rule rule-card" data-target="#new/UserAgent">\n      <div class="card testimonial-card z-depth-1 hoverable">\n        <div class="card-up">\n        </div>\n        <div class="avatar">\n          <i class="rounded-circle img-responsive card-avatar-content '+f((b.getRuleIconClass||a&&a.getRuleIconClass||e).call(a,(b.readGlobalVar||a&&a.readGlobalVar||e).call(a,"RQ.RULE_TYPES.USERAGENT",{name:"readGlobalVar",hash:{},data:d}),{name:"getRuleIconClass",hash:{},data:d}))+'"></i>\n        </div>\n        <div class="card-body">\n          <h4 class="card-title">Override User-Agent</h4>\n          <p class="card-text"><i class="fa fa-quote-left"></i>Emulate for different devices by varying user-agent</p>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-md-4 card-script-rule rule-card" data-target="#new/Script">\n      <div class="card testimonial-card z-depth-1 hoverable">\n        <div class="card-up">\n        </div>\n        <div class="avatar">\n          <i class="rounded-circle img-responsive card-avatar-content '+f((b.getRuleIconClass||a&&a.getRuleIconClass||e).call(a,(b.readGlobalVar||a&&a.readGlobalVar||e).call(a,"RQ.RULE_TYPES.SCRIPT",{name:"readGlobalVar",hash:{},data:d}),{name:"getRuleIconClass",hash:{},data:d}))+'"></i>\n        </div>\n        <div class="card-body">\n          <h4 class="card-title">Insert Scripts</h4>\n          <p class="card-text"><i class="fa fa-quote-left"></i>Add custom scripts to any website</p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</section>\n'},useData:!0}),this.RQ.Templates.RuleIndex=Handlebars.template({1:function(a,b,c,d){return'    <div class="placeholder-message">\n      <h3 class="heading row">Get Started</h3>\n      <div class="body row">Please click on <i class="add-rule-icon fa fa-plus-circle"></i> button in the toolbar to setup rules to modify network requests.</div>\n      <div class="actions row">\n        <a class="btn btn-info waves-effect waves-light" target="_blank" href="/home">Home</a>\n        <a class="btn btn-warning waves-effect waves-light" href="/content/">Blog</a>\n      </div>\n    </div>\n'},3:function(a,b,c,d){var e;return'    <table class="table">\n      <thead>\n      <tr>\n        <th class="item-selection-cell">\n          <input type="checkbox" class="filled-in select-all-rows-checkbox" id="select-all-rows-checkbox" title="Select All"/>\n          <label for="select-all-rows-checkbox"></label>\n        </th>\n        <th> <span class="rules-number badge">'+this.escapeExpression(this.lambda(null!=(e=null!=a?a.rules:a)?e.length:e,a))+'</span> </th>\n        <th>Name & Description</th>\n        <th class="status-cell">Status</th>\n        <th>Created on</th>\n      </tr>\n      </thead>\n      <tbody>\n'+(null!=(e=b.each.call(a,null!=a?a.rules:a,{name:"each",hash:{},fn:this.program(4,d,0),inverse:this.noop,data:d}))?e:"")+"      </tbody>\n    </table>\n"},4:function(a,b,c,d){var e;return null!=(e=this.invokePartial(c.RuleItemRow,a,{name:"RuleItemRow",data:d,indent:"        ",helpers:b,partials:c}))?e:""},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return(null!=(e=this.invokePartial(c.Toolbar,a,{name:"Toolbar",data:d,helpers:b,partials:c}))?e:"")+'\n<section class="list-index content-body">\n'+(null!=(e=(b.equals||a&&a.equals||b.helperMissing).call(a,null!=(e=null!=a?a.rules:a)?e.length:e,0,{name:"equals",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+"</section>\n"},usePartial:!0,useData:!0}),this.RQ.Templates.ScriptRuleEditor=Handlebars.template({1:function(a,b,c,d,e,f){var g,h,i=b.helperMissing;return'      <div class="pair-container" data-index="'+this.escapeExpression((h=null!=(h=b.index||d&&d.index)?h:i,"function"==typeof h?h.call(a,{name:"index",hash:{},data:d}):h))+'">\n        <div class="well">\n'+(null!=(g=this.invokePartial(c.SourceField,a,{name:"SourceField",hash:{sourcePlaceholder:"Leave this field Empty to add below scripts to all websites"},data:d,indent:"          ",helpers:b,partials:c}))?g:"")+'        </div>\n        <div class="title">Scripts</div>\n        <div class="library-section well">\n          <label class="active">Library</label>\n'+(null!=(g=(b.eachGlobalVar||a&&a.eachGlobalVar||i).call(a,"RQ.SCRIPT_LIBRARIES",{name:"eachGlobalVar",hash:{},fn:this.program(2,d,0,e,f),inverse:this.noop,data:d}))?g:"")+"        </div>\n"+(null!=(g=b.each.call(a,null!=a?a.scripts:a,{name:"each",hash:{},fn:this.program(5,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'        <button type="button" class="btn btn-default add-script">\n          <i class="fa fa-plus-circle"></i>\n          <span>Add Custom Script</span>\n        </button>\n      </div>\n'},2:function(a,b,c,d,e,f){var g,h,i=b.helperMissing,j=this.escapeExpression;return'            <div class="library-option">\n              <input type="checkbox" class="filled-in" id="checkbox-'+j((h=null!=(h=b.key||d&&d.key)?h:i,"function"==typeof h?h.call(a,{name:"key",hash:{},data:d}):h))+'" name="library" value="'+j((h=null!=(h=b.key||d&&d.key)?h:i,"function"==typeof h?h.call(a,{name:"key",hash:{},data:d}):h))+'"\n              '+(null!=(g=(b.contains||a&&a.contains||i).call(a,null!=f[1]?f[1].libraries:f[1],d&&d.key,{name:"contains",hash:{},fn:this.program(3,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'>\n              <label for="checkbox-'+j((h=null!=(h=b.key||d&&d.key)?h:i,"function"==typeof h?h.call(a,{name:"key",hash:{},data:d}):h))+'">'+j((h=null!=(h=b.name||(null!=a?a.name:a))?h:i,"function"==typeof h?h.call(a,{name:"name",hash:{},data:d}):h))+"</label>\n            </div>\n"},3:function(a,b,c,d){return'checked="checked"'},5:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression;return'          <div class="script-section well" data-index="'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'">\n            <div class="row">\n              <input type="radio" name="script-'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'-type" id="script-'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'-type-1" class="with-gap script-type"\n                value="'+i((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.SCRIPT_TYPES.URL",{name:"readGlobalVar",hash:{},data:d}))+'" '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.SCRIPT_TYPES.URL",null!=a?a.type:a,{name:"equalsGlobalVar",hash:{},fn:this.program(6,d,0),inverse:this.noop,data:d}))?e:"")+'>\n              <label class="script-type-label" for="script-'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'-type-1">URL</label>\n\n              <input type="radio" name="script-'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'-type" id="script-'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'-type-2" class="with-gap script-type"\n                value="'+i((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.SCRIPT_TYPES.CODE",{name:"readGlobalVar",hash:{},data:d}))+'" '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.SCRIPT_TYPES.CODE",null!=a?a.type:a,{name:"equalsGlobalVar",hash:{},fn:this.program(6,d,0),inverse:this.noop,data:d}))?e:"")+'>\n              <label class="script-type-label" for="script-'+i((f=null!=(f=b.index||d&&d.index)?f:g,typeof f===h?f.call(a,{name:"index",hash:{},data:d}):f))+'-type-2">Code</label>\n\n              <span class="fa fa-trash-o remove-script" title="Remove"></span>\n            </div>\n'+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.SCRIPT_TYPES.URL",null!=a?a.type:a,{name:"equalsGlobalVar",hash:{},fn:this.program(8,d,0),inverse:this.noop,data:d}))?e:"")+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.SCRIPT_TYPES.CODE",null!=a?a.type:a,{name:"equalsGlobalVar",hash:{},fn:this.program(10,d,0),inverse:this.noop,data:d}))?e:"")+'\n            <div class="script-load-time-container dropdown-container">\n              <div class="script-load-time dropdown">\n'+(null!=(e=this.invokePartial(c.DropdownButton,a,{name:"DropdownButton",data:d,indent:"                ",helpers:b,partials:c}))?e:"")+'                <ul class="dropdown-menu">\n                  <li>\n                    <a class="dropdown-item" data-value="'+i((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.SCRIPT_LOAD_TIME.BEFORE_PAGE_LOAD",{name:"readGlobalVar",hash:{},data:d}))+'"\n                      '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.SCRIPT_LOAD_TIME.BEFORE_PAGE_LOAD",null!=a?a.loadTime:a,{name:"equalsGlobalVar",hash:{},fn:this.program(12,d,0),inverse:this.noop,data:d
}))?e:"")+'>Before Page Load</a>\n                  </li>\n                  <li>\n                    <a class="dropdown-item" data-value="'+i((b.readGlobalVar||a&&a.readGlobalVar||g).call(a,"RQ.SCRIPT_LOAD_TIME.AFTER_PAGE_LOAD",{name:"readGlobalVar",hash:{},data:d}))+'"\n                      '+(null!=(e=(b.equalsGlobalVar||a&&a.equalsGlobalVar||g).call(a,"RQ.SCRIPT_LOAD_TIME.AFTER_PAGE_LOAD",null!=a?a.loadTime:a,{name:"equalsGlobalVar",hash:{},fn:this.program(12,d,0),inverse:this.noop,data:d}))?e:"")+">After Page Load</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n"},6:function(a,b,c,d){return"checked"},8:function(a,b,c,d){var e;return'              <input type="text" class="form-control script-url-input" value="'+this.escapeExpression((e=null!=(e=b.value||(null!=a?a.value:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"value",hash:{},data:d}):e))+'"\n                placeholder="Enter source of script (relative or absolute)" />\n'},10:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression;return'              <div class="script-code-container">\n                <textarea type="text" class="form-control md-textarea script-code-input" rows="5" cols="130"\n                  placeholder="Enter javascript code snippet here (max 500 characters)...">'+h((f=null!=(f=b.value||(null!=a?a.value:a))?f:g,"function"==typeof f?f.call(a,{name:"value",hash:{},data:d}):f))+'</textarea>\n                <div class="script-code-characters"><span class="count">'+h((b.subtract||a&&a.subtract||g).call(a,500,null!=(e=null!=a?a.value:a)?e.length:e,{name:"subtract",hash:{},data:d}))+"</span> characters</div>\n              </div>\n"},12:function(a,b,c,d){return"selected"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e,f){var g;return(null!=(g=this.invokePartial(c.RuleEditorHeader,a,{name:"RuleEditorHeader",hash:{heading:"Insert custom scripts in a website"},data:d,helpers:b,partials:c}))?g:"")+'\n<section class="rule-body content-body">\n'+(null!=(g=this.invokePartial(c.RuleProperties,a,{name:"RuleProperties",data:d,indent:"  ",helpers:b,partials:c}))?g:"")+'\n  <div class="pairs-container">\n'+(null!=(g=b.each.call(a,null!=a?a.pairs:a,{name:"each",hash:{},fn:this.program(1,d,0,e,f),inverse:this.noop,data:d}))?g:"")+"  </div>\n</section>\n"},usePartial:!0,useData:!0,useDepths:!0}),this.RQ.Templates.ShareRulesModal=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'\x3c!-- Central Modal Medium Warning --\x3e\n<div class="modal-dialog modal-notify modal-warning" role="document">\n  \x3c!--Content--\x3e\n  <div class="modal-content">\n    \x3c!--Header--\x3e\n    <div class="modal-header">\n      <p class="heading lead">Share Rules</p>\n\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n        <span aria-hidden="true" class="white-text">&times;</span>\n      </button>\n    </div>\n\n    \x3c!--Body--\x3e\n    <div class="modal-body">\n      <div class="text-center">\n        <i class="fa fa-check fa-4x mb-3 animated rotateIn"></i>\n        <p>Please enter a name for your shared list of rules</p>\n\n        <div class="input-field col-md-8">\n          <input id="shared-list-name-field" type="text" placeholder="My Shared list" data-key="listName">\n        </div>\n      </div>\n    </div>\n\n    \x3c!--Footer--\x3e\n    <div class="modal-footer justify-content-center">\n      <a type="button"\n         data-event="modal:closed"\n         data-dismiss="modal"\n         data-clipboard-text="'+this.escapeExpression((e=null!=(e=b.sharedUrl||(null!=a?a.sharedUrl:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"sharedUrl",hash:{},data:d}):e))+'"\n         class="btn btn-primary-modal sharedUrl-copy-button">Copy & Close <i class="fa fa-diamond ml-1"></i></a>\n    </div>\n  </div>\n  \x3c!--/.Content--\x3e\n</div>\n\x3c!-- Central Modal Medium Warning--\x3e\n'},useData:!0}),this.RQ.Templates.SharedListIndex=Handlebars.template({1:function(a,b,c,d){var e;return null!=(e=this.invokePartial(c.SharedListItemRow,a,{name:"SharedListItemRow",data:d,indent:"      ",helpers:b,partials:c}))?e:""},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return(null!=(e=this.invokePartial(c.SharedListIndexToolbar,a,{name:"SharedListIndexToolbar",data:d,helpers:b,partials:c}))?e:"")+'\n<section class="list-index content-body">\n  <table class="table">\n    <thead>\n    <tr>\n      <th class="item-selection-cell">\n        <input type="checkbox" class="filled-in select-all-rows-checkbox" id="select-all-rows-checkbox" title="Select All"/>\n        <label for="select-all-rows-checkbox"></label>\n      </th>\n      <th>Name</th>\n      <th>Link</th>\n      <th>Actions</th>\n      <th>Created on</th>\n    </tr>\n    </thead>\n    <tbody>\n'+(null!=(e=b.each.call(a,null!=a?a.list:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"    </tbody>\n  </table>\n</section>\n"},usePartial:!0,useData:!0}),this.RQ.Templates.SharedRulesIndex=Handlebars.template({1:function(a,b,c,d){var e;return null!=(e=this.invokePartial(c.SharedRuleItemRow,a,{name:"SharedRuleItemRow",data:d,indent:"      ",helpers:b,partials:c}))?e:""},3:function(a,b,c,d){return'    <div class="card-container-404">\n      <div class="col-md-8">\n        <div class="card hoverable">\n          <div class="card-image">\n            <div class="view overlay hm-white-slight z-depth-1">\n              <img src="http://www.requestly.in/rules/resources/images/404-page-error.png">\n              <div class="mask waves-effect activator"></div>\n            </div>\n          </div>\n\n          <div class="card-content">\n            <span class="card-title activator grey-text text-darken-4">SharedList url is invalid or is deleted by Author</span>\n          </div>\n        </div>\n      </div>\n    </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return(null!=(e=this.invokePartial(c.SharedRulesIndexToolbar,a,{name:"SharedRulesIndexToolbar",data:d,helpers:b,partials:c}))?e:"")+'\n<section class="rule-index content-body list-index">\n  <table class="table">\n    <thead>\n    <tr>\n      <th> <span class="rules-number badge">'+this.escapeExpression(this.lambda(null!=(e=null!=a?a.rules:a)?e.length:e,a))+'</span> </th>\n      <th>Name & Description</th>\n      <th class="status-cell">Status</th>\n      <th>Created on</th>\n    </tr>\n    </thead>\n    <tbody>\n'+(null!=(e=b.each.call(a,null!=a?a.rules:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:"")+"    </tbody>\n  </table>\n"+(null!=(e=(b.equals||a&&a.equals||b.helperMissing).call(a,null!=(e=null!=a?a.rules:a)?e.length:e,0,{name:"equals",hash:{},fn:this.program(3,d,0),inverse:this.noop,data:d}))?e:"")+"</section>\n"},usePartial:!0,useData:!0}),this.RQ.Templates.SusiModal=Handlebars.template({1:function(a,b,c,d){var e;return"            "+this.escapeExpression((e=null!=(e=b.content||(null!=a?a.content:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"content",hash:{},data:d}):e))+"\n"},3:function(a,b,c,d){return"            Please login with Google to share your rules with other users.\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return'<div class="modal-dialog modal-notify modal-danger" role="document">\n  \x3c!--Content--\x3e\n  <div class="modal-content">\n    \x3c!--Header--\x3e\n    <div class="modal-header">\n      <p class="heading lead">Sign In</p>\n\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n        <span aria-hidden="true" class="white-text">&times;</span>\n      </button>\n    </div>\n\n    \x3c!--Body--\x3e\n    <div class="modal-body">\n      <div class="text-center">\n        <i class="fa fa-google-plus fa-4x mb-3 animated rotateIn"></i>\n        <p>\n'+(null!=(e=b.if.call(a,null!=a?a.content:a,{name:"if",hash:{},fn:this.program(1,d,0),inverse:this.program(3,d,0),data:d}))?e:"")+'        </p>\n      </div>\n    </div>\n\n    \x3c!--Footer--\x3e\n    <div class="modal-footer justify-content-center">\n      <a type="button" class="btn btn-outline-secondary-modal waves-effect" data-dismiss="modal">Cancel</a>\n      <a type="button" class="btn btn-primary-modal auth-provider">SignIn <i class="fa fa-sign-in ml-1"></i></a>\n    </div>\n  </div>\n  \x3c!--/.Content--\x3e\n</div>'},useData:!0}),this.RQ.Templates.UserAgentRuleEditor=Handlebars.template({1:function(a,b,c,d,e,f){var g,h,i=b.helperMissing,j=this.escapeExpression;return'      <div class="well pair-container" data-index="'+j((h=null!=(h=b.index||d&&d.index)?h:i,"function"==typeof h?h.call(a,{name:"index",hash:{},data:d}):h))+'">\n        <div class="row">\n          <div class="user-agent-container">\n            <label class="active row-label">'+j((b.readGlobalVar||a&&a.readGlobalVar||i).call(a,"RQ.HEADER_NAMES.USER_AGENT",{name:"readGlobalVar",hash:{},data:d}))+'</label>\n            <div class="dropdown-container">\n              <div class="dropdown env-type-selector" data-key="envType">\n                <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">\n                  <span class="dropdown-value" data-value="">Select</span>\n                  <span class="caret"></span>\n                </button>\n                <ul class="dropdown-menu">\n                  <li>\n                    <a class="dropdown-item" data-value="device"\n                      '+(null!=(g=(b.equals||a&&a.equals||i).call(a,null!=a?a.envType:a,"device",{name:"equals",hash:{},fn:this.program(2,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'>Device</a>\n                  </li>\n                  <li>\n                    <a class="dropdown-item" data-value="browser"\n                      '+(null!=(g=(b.equals||a&&a.equals||i).call(a,null!=a?a.envType:a,"browser",{name:"equals",hash:{},fn:this.program(2,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'>Browser</a>\n                  </li>\n                  <li>\n                    <a class="dropdown-item" data-value="custom"\n                      '+(null!=(g=(b.equals||a&&a.equals||i).call(a,null!=a?a.envType:a,"custom",{name:"equals",hash:{},fn:this.program(2,d,0,e,f),inverse:this.noop,data:d}))?g:"")+">Custom</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n"+(null!=(g=(b.equals||a&&a.equals||i).call(a,null!=a?a.envType:a,"device",{name:"equals",hash:{},fn:this.program(4,d,0,e,f),inverse:this.noop,data:d}))?g:"")+(null!=(g=(b.equals||a&&a.equals||i).call(a,null!=a?a.envType:a,"browser",{name:"equals",hash:{},fn:this.program(11,d,0,e,f),inverse:this.noop,data:d}))?g:"")+(null!=(g=(b.equals||a&&a.equals||i).call(a,null!=a?a.envType:a,"custom",{name:"equals",hash:{},fn:this.program(13,d,0,e,f),inverse:this.noop,data:d}))?g:"")+"          </div>\n        </div>\n"+(null!=(g=this.invokePartial(c.SourceField,a,{name:"SourceField",hash:{sourcePlaceholder:"Leave this field Empty to apply above modification to all urls"},data:d,indent:"        ",helpers:b,partials:c}))?g:"")+'        <div class="request-type">\n          <input type="checkbox" class="request-type-checkbox filled-in" id="checkbox-'+j((h=null!=(h=b.index||d&&d.index)?h:i,"function"==typeof h?h.call(a,{name:"index",hash:{},data:d}):h))+'"\n            '+(null!=(g=(b.equalsGlobalVar||a&&a.equalsGlobalVar||i).call(a,"RQ.REQUEST_TYPES.MAIN_FRAME",null!=(g=null!=a?a.source:a)?g.requestType:g,{name:"equalsGlobalVar",hash:{},fn:this.program(15,d,0,e,f),inverse:this.noop,data:d}))?g:"")+'>\n          <label for="checkbox-'+j((h=null!=(h=b.index||d&&d.index)?h:i,"function"==typeof h?h.call(a,{name:"index",hash:{},data:d}):h))+'">If the source points to a website URL, rule will apply on all requests originated from the page.</label>\n        </div>\n      </div>\n'},2:function(a,b,c,d){return"selected"},4:function(a,b,c,d,e,f){var g;return'              <div class="dropdown-container">\n                <div class="dropdown env-value-selector" data-key="env">\n                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">\n                    <span class="dropdown-value" data-value="">Select device</span>\n                    <span class="caret"></span>\n                  </button>\n                  <ul class="dropdown-menu">\n'+(null!=(g=(b.eachGlobalVar||a&&a.eachGlobalVar||b.helperMissing).call(a,"RQ.UserAgentLibrary.USER_AGENT.device",{name:"eachGlobalVar",hash:{},fn:this.program(5,d,0,e,f),inverse:this.noop,data:d}))?g:"")+"                  </ul>\n                </div>\n              </div>\n"},5:function(a,b,c,d,e,f){var g;return null!=(g=b.if.call(a,null!=a?a.values:a,{name:"if",hash:{},fn:this.program(6,d,0,e,f),inverse:this.program(9,d,0,e,f),data:d}))?g:""},6:function(a,b,c,d,e,f){var g,h;return'                        <li class="dropdown-submenu">\n                          <a class="dropdown-item">'+this.escapeExpression((h=null!=(h=b.name||(null!=a?a.name:a))?h:b.helperMissing,"function"==typeof h?h.call(a,{name:"name",hash:{},data:d}):h))+'</a>\n                          <ul class="dropdown-menu">\n'+(null!=(g=b.each.call(a,null!=a?a.values:a,{name:"each",hash:{},fn:this.program(7,d,0,e,f),inverse:this.noop,data:d}))?g:"")+"                          </ul>\n                        </li>\n"},7:function(a,b,c,d,e,f){var g,h,i=b.helperMissing,j=this.escapeExpression;return'                              <li>\n                                <a class="dropdown-item" data-value="'+j((b.concat||a&&a.concat||i).call(a,this.data(d,1)&&this.data(d,1).key,".",d&&d.key,{name:"concat",hash:{},data:d}))+'"\n                                  '+(null!=(g=(b.equals||a&&a.equals||i).call(a,null!=f[3]?f[3].env:f[3],(b.concat||a&&a.concat||i).call(a,this.data(d,1)&&this.data(d,1).key,".",d&&d.key,{name:"concat",hash:{},data:d}),{name:"equals",hash:{},fn:this.program(2,d,0,e,f),inverse:this.noop,data:d}))?g:"")+">"+j((h=null!=(h=b.name||(null!=a?a.name:a))?h:i,"function"==typeof h?h.call(a,{name:"name",hash:{},data:d}):h))+"</a>\n                              </li>\n"},9:function(a,b,c,d,e,f){var g,h,i=b.helperMissing,j=this.escapeExpression;return'                        <li>\n                          <a class="dropdown-item" data-value="'+j((h=null!=(h=b.key||d&&d.key)?h:i,"function"==typeof h?h.call(a,{name:"key",hash:{},data:d}):h))+'"\n                            '+(null!=(g=(b.equals||a&&a.equals||i).call(a,null!=f[2]?f[2].env:f[2],d&&d.key,{name:"equals",hash:{},fn:this.program(2,d,0,e,f),inverse:this.noop,data:d}))?g:"")+">"+j((h=null!=(h=b.name||(null!=a?a.name:a))?h:i,"function"==typeof h?h.call(a,{name:"name",hash:{},data:d}):h))+"</a>\n                        </li>\n"},11:function(a,b,c,d,e,f){var g;return'              <div class="dropdown-container">\n                <div class="dropdown env-value-selector" data-key="env">\n                  <button class="btn dropdown-toggle" type="button" data-toggle="dropdown">\n                    <span class="dropdown-value" data-value="">Select browser</span>\n                    <span class="caret"></span>\n                  </button>\n                  <ul class="dropdown-menu">\n'+(null!=(g=(b.eachGlobalVar||a&&a.eachGlobalVar||b.helperMissing).call(a,"RQ.UserAgentLibrary.USER_AGENT.browser",{name:"eachGlobalVar",hash:{},fn:this.program(5,d,0,e,f),inverse:this.noop,data:d}))?g:"")+"                  </ul>\n                </div>\n              </div>\n"},13:function(a,b,c,d){var e;return'              <input type="text" class="user-agent-input form-control" data-key="userAgent" value="'+this.escapeExpression((e=null!=(e=b.userAgent||(null!=a?a.userAgent:a))?e:b.helperMissing,"function"==typeof e?e.call(a,{name:"userAgent",hash:{},data:d}):e))+'"\n                 placeholder="Enter user agent string">\n'},15:function(a,b,c,d){return'checked="checked"'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e,f){var g;return(null!=(g=this.invokePartial(c.RuleEditorHeader,a,{name:"RuleEditorHeader",hash:{heading:"Override User-Agent in HTTP Request"},data:d,helpers:b,partials:c}))?g:"")+'\n<section class="rule-body content-body">\n'+(null!=(g=this.invokePartial(c.RuleProperties,a,{name:"RuleProperties",data:d,indent:"  ",helpers:b,partials:c}))?g:"")+"\n"+(null!=(g=this.invokePartial(c.PairsContainerHeading,a,{name:"PairsContainerHeading",hash:{heading:"Source User-Agent Pairs"},data:d,indent:"  ",helpers:b,partials:c}))?g:"")+'\n  <div class="pairs-container">\n'+(null!=(g=b.each.call(a,null!=a?a.pairs:a,{name:"each",hash:{},fn:this.program(1,d,0,e,f),inverse:this.noop,data:d}))?g:"")+"  </div>\n</section>\n"},usePartial:!0,useData:!0,useDepths:!0});var BaseModel=Backbone.Model.extend({getStorageService:function(){return RQ.StorageService}}),PushNotificationModel=Backbone.Model.extend({defaults:{id:0,type:"primary",label:"",heading:"",contentType:"para",content:"",isRead:!1}}),SharedListModel=Backbone.Model.extend({defaults:{listName:"",sharedUrl:"",shareId:"",creationDate:"",isEnabled:!0}}),UserModel=BaseModel.extend({defaults:{profile:{provider:"",uid:"",displayName:"",email:"",profileImageURL:""},isLoggedIn:!1},initialize:function(){this.registerBinders()},registerBinders:function(){},createSharedList:function(a,b){var c=this.getPublicSharedListPath(a);return RQ.DataStoreUtils.setValue(c,{access:{owner:this.getProfile().uid},shareId:a,rules:b,isEnabled:!0}),RQ.Utils.submitEvent(RQ.GA_EVENTS.CATEGORIES.SHARED_LIST,RQ.GA_EVENTS.ACTIONS.CREATED,"Shared List created"),RQ.getSharedURL(a)},setSharedListName:function(a,b){var c=this.getUserSharedListsPath();c.push(a),RQ.DataStoreUtils.setValue(c,{listName:b,shareId:a,creationDate:RQ.Utils.getCurrentTime()})},authenticate:function(a){RQ.DataStoreUtils.authenticate(a)},getProfile:function(){return this.get("profile")},setProfile:function(a){return this.set("profile",a),this},setUserLoggedIn:function(a){return this.set("isLoggedIn",a),this},getUserLoggedIn:function(){return this.get("isLoggedIn")},getUserNodePath:function(){return this.getProfile().uid?[RQ.FIREBASE_NODES.USERS,this.getProfile().uid]:null},getUserSharedListsPath:function(){var a=this.getUserNodePath();return a&&a.push(RQ.FIREBASE_NODES.SHARED_LISTS),a},getPublicSharedListPath:function(a){return[RQ.FIREBASE_NODES.PUBLIC,RQ.FIREBASE_NODES.SHARED_LISTS,a]}}),BaseRuleModel=BaseModel.extend({defaults:function(){return{name:"",description:"",ruleType:"",status:RQ.RULE_STATUS.ACTIVE,creationDate:""}},getDefaultSource:function(){return{key:RQ.RULE_KEYS.URL,operator:RQ.RULE_OPERATORS.CONTAINS,value:""}},initialize:function(){this.transformAttributes()},transformAttributes:function(){},insertDefaultSourceInPairs:function(){var a=this.getPairs(),b=!1;return _.each(a,function(a){void 0===a.source&&(a.source=this.getDefaultSource(),b=!0)},this),b},setId:function(a){this.set("id",a,{silent:!0})},getId:function(){return this.get("id")},getVersion:function(){return this.get("version")},setVersion:function(a){return this.set("version",a,{silent:!0})},generateId:function(){var a=this.hasCreationDate()?this.getCreationDate():this.getTimestamp(),b=this.getRuleType()+"_"+a;return this.setId(b),b},getName:function(){return this.get("name")},setName:function(a){this.set("name",a)},getDescription:function(){return this.get("description")},setDescription:function(a){this.set("description",a)},getTimestamp:function(){return Date.now()},getTimestampFromId:function(){return this.getId().split("_")[1]},setCreationDate:function(a){this.set("creationDate",a)},getCreationDate:function(){return this.get("creationDate")},hasCreationDate:function(){return void 0!==this.get("creationDate")&&this.get("creationDate")},getRuleType:function(){return this.get("ruleType")},setRuleType:function(a){this.set("ruleType",a)},getStatus:function(){return this.get("status")},setStatus:function(a){this.set("status",a,{silent:!0})},getPair:function(a){var b=this.getPairs();return b&&b[a]},getPairs:function(){return this.get("pairs")},setPair:function(a,b){this.getPairs()[a]=b},save:function(a){var b=this.getId(),c={},d=this.getStorageService();b||(b=this.generateId()),c[b]=this.toJSON(),a=a||{},a.callback=a.callback||function(){console.log("Object saved")},d.saveRecord(c,a.callback)},isValid:function(){var a=this.getName(),b=this.getRuleType();return!(!a||!b)&&!!RQ.RULE_TYPES.hasOwnProperty(b.toUpperCase())},remove:function(a){var b=this.getId(),c=this.getStorageService();a=a||{},a.callback=a.callback||function(){console.log("Object removed")},c.removeRecord(b,a.callback)}}),RedirectRuleModel=BaseRuleModel.extend({defaults:function(){return _.extend(BaseRuleModel.prototype.defaults(),{ruleType:RQ.RULE_TYPES.REDIRECT,pairs:[this.getDefaultPair()]})},getDefaultPair:function(){return{source:this.getDefaultSource(),destination:""}},isDeprecatedFormat:function(){var a=this.get("source"),b=this.get("destination");return void 0!==a&&void 0!==b},introducePairs:function(){var a,b=(this.getPairs(),this.get("source")),c=this.get("destination");this.isDeprecatedFormat()&&(a=this.getDefaultPair(),a.source.value=b.values[0],a.source.operator=b.operator,a.destination=c,this.set("pairs",[a]),this.unset("source"),this.unset("destination"))},transformAttributes:function(){this.introducePairs()}}),CancelRuleModel=RedirectRuleModel.extend({defaults:function(){return _.extend(RedirectRuleModel.prototype.defaults(),{ruleType:RQ.RULE_TYPES.CANCEL})},isDeprecatedFormat:function(){return void 0!==this.get("source")}}),ReplaceRuleModel=BaseRuleModel.extend({defaults:function(){return _.extend(BaseRuleModel.prototype.defaults(),{ruleType:RQ.RULE_TYPES.REPLACE,pairs:[this.getDefaultPair()]})},getDefaultPair:function(){return{from:"",to:"",status:RQ.RULE_STATUS.INACTIVE,source:this.getDefaultSource()}},upgradeToV2:function(){this.insertDefaultSourceInPairs(),this.setVersion(2)},transformAttributes:function(){this.getVersion()||this.upgradeToV2()}}),HeadersRuleModel=BaseRuleModel.extend({defaults:function(){return _.extend(BaseRuleModel.prototype.defaults(),{ruleType:RQ.RULE_TYPES.HEADERS,pairs:[this.getDefaultPair()]})},getDefaultPair:function(){return{type:RQ.MODIFICATION_TYPES.ADD,target:RQ.HEADERS_TARGET.REQUEST,header:"",value:"",source:this.getDefaultSource()}},transformAttributes:function(){this.insertDefaultSourceInPairs()}}),UserAgentRuleModel=BaseRuleModel.extend({defaults:function(){return _.extend(BaseRuleModel.prototype.defaults(),{ruleType:RQ.RULE_TYPES.USERAGENT,pairs:[this.getDefaultPair()]})},getDefaultPair:function(){return{source:this.getDefaultSource(),userAgent:""}},getDefaultSource:function(){return _.extend(BaseRuleModel.prototype.getDefaultSource(),{requestType:RQ.REQUEST_TYPES.MAIN_FRAME})}}),ScriptRuleModel=BaseRuleModel.extend({defaults:function(){return _.extend(BaseRuleModel.prototype.defaults(),{ruleType:RQ.RULE_TYPES.SCRIPT,pairs:[this.getDefaultPair()]})},getDefaultPair:function(){return{source:BaseRuleModel.prototype.getDefaultSource(),libraries:[],scripts:[]}},setLibraries:function(a,b){b=b||0,this.getPair(b).libraries=a},getScripts:function(a){return a=a||0,this.getPair(a).scripts},getDefaultScript:function(){return{type:RQ.SCRIPT_TYPES.URL,value:"",loadTime:RQ.SCRIPT_LOAD_TIME.AFTER_PAGE_LOAD}}}),RulesCollection=Backbone.Collection.extend({model:BaseRuleModel,fetchRules:function(a){var b=this;a=a||{},RQ.StorageService.getRecords({forceFetch:!0,callback:function(c){b.models.length=0,_.each(c,function(a){var c=new b.model(a);b.add(c)}),"function"==typeof a.success&&a.success(b),b.trigger("loaded")}})},comparator:function(a){return-1*a.getTimestampFromId()}}),PushNotificationCollection=Backbone.Collection.extend({model:PushNotificationModel,url:RQ.configs.WEB_URL+"/static/notifications.json",handleItemsFetched:function(){var a=this;RQ.StorageService.getRecord(RQ.STORAGE_KEYS.LATEST_NOTIFICATION_READ_BY_USER,function(b){var c=b[RQ.STORAGE_KEYS.LATEST_NOTIFICATION_READ_BY_USER]||-1;_.each(a.models,function(a){a.set("isRead",a.get("id")<=c)}),a.trigger("loaded")})},fetchItems:function(){this.fetch({success:this.handleItemsFetched.bind(this)})},parse:function(a){return a.items}}),SharedRulesCollection=RulesCollection.extend({model:BaseRuleModel,fetchRules:function(a){var b=this,c=RQ.currentUser.getPublicSharedListPath(a);RQ.DataStoreUtils.getValue(c,function(a){Logger.log("SharedList object is - ",a),a=a||{};var c=a.rules||[];_.each(c,function(a){var c=new b.model(a);b.add(c)}),b.trigger("loaded")},function(a){alert("Error fetching rules from sharedList: "+a.code)})}}),SharedListCollection=Backbone.Collection.extend({model:SharedListModel,fetchSharedLists:function(){var a=this,b=RQ.currentUser.getUserSharedListsPath();RQ.DataStoreUtils.getValue(b,function(b){_.each(b,function(b){var c=new a.model(b);c.set("id",b.shareId),c.set("sharedUrl",RQ.getSharedURL(b.shareId)),a.add(c)}),a.trigger("loaded")},function(a){alert("Error fetching rules from sharedList: "+a.code)})}});RQ.Mixins.InputValidation={validateSourceField:function(a){var b=null,c=a.value,d=a.operator;return a.value||(b="Error: Source Field cannot be empty"),d!==RQ.RULE_OPERATORS.MATCHES||RQ.Utils.isValidRegex(c)||(b='Error: "'+c+'" is not a valid regular expression'),a.key!==RQ.RULE_KEYS.URL||d!==RQ.RULE_OPERATORS.EQUALS||RQ.Utils.isValidUrl(c)||(b="Error: Source Url should begin with a valid protocol (http: | https: | ftp:)"),null==b||(Notification.show("error",b),!1)},validateDestinationField:function(a,b){var c=null;return b||(c="Error: Destination Field can not be empty"),[RQ.RULE_OPERATORS.CONTAINS,RQ.RULE_OPERATORS.EQUALS].indexOf(a)>=0&&!RQ.Utils.isValidUrl(b)&&(c="Error: Destination Url should begin with a valid protocol (http: | https: | ftp:)"),null==c||(Notification.show("error",c),!1)},validateFieldNonEmpty:function(a,b){return!_.isEmpty(b)||(Notification.show("error",'Error: "'+a+'" field cannot be empty'),!1)}};var BaseView=Backbone.View.extend({Mixins:[],Model:Backbone.Model,loadModel:function(a){a instanceof Backbone.Model?this.model=a:this.model=new this.Model(a)},loadMixin:function(a){_.extend(this,a)},loadMixins:function(a){_.each(a,this.loadMixin,this)},initialize:function(a){a=a||{},this.registerBinders(),this.loadModel(a.model),this.loadMixins(this.Mixins),this.alsoInitialize()},render:function(a){a=a||{},a.model&&this.loadModel(a.model),this.template=a.template||this.getTemplate();var b=this.$el.find(".rule-body").scrollTop();this.$el.html(this.getMarkup(this.template)),this.$el.find(".rule-body").scrollTop(b),this.initWidgets()},getMarkup:function(a){return a(this.model.toJSON())},registerBinders:function(){},alsoValidate:function(){return!0},removeAdditionalFields:function(){},alsoInitialize:function(){},initWidgets:function(){}}),Modal=BaseView.extend({className:"modal fade",attributes:{role:"dialog"},getTemplate:function(){return RQ.Templates.Modal},events:{"change input[data-key]":"updateValueFromInput","click .modal-footer .btn-primary-modal":"handlePrimaryButtonClicked"},handlePrimaryButtonClicked:function(){},updateValueFromInput:function(a){this.model.set(a.target.getAttribute("data-key"),a.target.value)},initWidgets:function(){},show:function(a){RQ.showModalView(this,a)},hide:function(){$(this.el).modal("hide")}}),SusiModal=Modal.extend({id:"susi-modal",events:{"click .auth-provider":"authenticate"},getTemplate:function(){return RQ.Templates.SusiModal},registerBinders:function(){this.handleLoginError=this.handleLoginError.bind(this)},authenticate:function(){RQ.currentUser.authenticate(this.loginCallback)},show:function(a){RQ.showModalView(this,a),a.loginCallback&&(this.loginCallback=a.loginCallback)},handleLoginError:function(a){console.log("Error signin in:",a)}}),ShareRulesModal=Modal.extend({id:"share-rules-modal",getTemplate:function(){return RQ.Templates.ShareRulesModal},initWidgets:function(){this.clipboard=new Clipboard(".sharedUrl-copy-button"),this.clipboard.on("success",function(a){Notification.show("success","Success: SharedList url copied!")})},handlePrimaryButtonClicked:function(a){var b=a.currentTarget.getAttribute("data-event");this.trigger(b,this.model.toJSON())},destructWidgets:function(){this.clipboard.destroy()}}),BaseRuleEditorView=BaseView.extend({events:{"keyup .rule-name-input":"updateRuleName","change .status-toggle":"updateRuleStatus","keyup .rule-description":"updateRuleDescription","click .add-pair":"addPair","click .delete-pair":"deletePair","click .close-editor":"closeEditor","click .save-rule":"saveRule","click .dropdown .dropdown-item":"handleDropdownValueChanged"},initWidgets:function(){this.$el.find('[data-toggle="dropdown"]').dropdown(),this.initDropdowns()},updateRuleName:function(a){this.model.setName(a.target.value)},updateRuleStatus:function(a){var b=$(a.currentTarget).is(":checked")?RQ.RULE_STATUS.ACTIVE:RQ.RULE_STATUS.INACTIVE;this.model.setStatus(b)},updateRuleDescription:function(a){this.model.setDescription(a.target.value)},addPair:function(){var a=this.model.getDefaultPair();this.model.getPairs().push(a),this.render()},deletePair:function(a){var b=$(a.target),c=Number(b.parents(".pair-container").attr("data-index"));this.model.getPairs().splice(c,1),this.render()},updateFieldInPair:function(a,b,c){var d,e=b.split("."),f=a;for(d=0;d<e.length-1;d++)f=f[e[d]];return f[e[d]]=c,this.onFieldUpdatedInPair(a,b,c),a},onFieldUpdatedInPair:function(a,b,c){},updateRulePair:function(a){var b=$(a.target),c=Number(b.parents(".pair-container").attr("data-index")),d=b.attr("data-key"),e=this.model.getPairs();"INPUT"===a.target.tagName&&this.updateFieldInPair(e[c],d,a.target.value)},updateDropdownSelectionState:function(a){a=$(a);var b=a.find(".dropdown-item[selected]");a.find(".dropdown-toggle").find(".dropdown-value").html(b.html()).attr("data-value",b.attr("data-value"))},initDropdowns:function(){_.each(this.$el.find(".dropdown"),this.updateDropdownSelectionState,this)},handleDropdownValueChanged:function(a){var b=$(a.target),c=b.attr("data-value");if(void 0===c)return!1;var d=b.parents(".dropdown"),e=Number(b.parents(".pair-container").attr("data-index")),f=d.attr("data-key"),g=this.model.getPairs();d.find(".dropdown-item").removeAttr("selected"),b.attr("selected",!0),this.updateDropdownSelectionState(d),this.updateFieldInPair(g[e],f,c),this.render()},validateRule:function(){return this.model.isValid()?this.alsoValidate():(Notification.show("error","Error: Rule Name can not be empty"),!1)},saveRule:function(){var a=this.model.getTimestamp(),b=this.model.getName(),c=RQ.GA_EVENTS.ACTIONS.MODIFIED,d=this;if(this.model.hasCreationDate()||(c=RQ.GA_EVENTS.ACTIONS.CREATED,this.model.setCreationDate(a)),!this.validateRule())return!1;this.removeAdditionalFields(),this.model.save({callback:function(){Notification.show("success",b+" has been saved successfully!"),RQ.Utils.submitEvent("rule",c,d.model.getRuleType().toLowerCase()+" rule "+c)}})},closeEditor:function(){var a=this.isSharedRule()?RQ.Utils.removeLastPart(Backbone.history.fragment,"/"):"";RQ.router.navigate(a,{trigger:!0})},isSharedRule:function(){return this.model.get("isSharedRule")}}),RedirectRuleEditorView=BaseRuleEditorView.extend({Model:RedirectRuleModel,Mixins:[RQ.Mixins.InputValidation],id:"redirect-rule-editor",className:"rule-editor",getTemplate:function(){return RQ.Templates.RedirectRuleEditor},getMarkup:function(a){return a(RQ.TemplateHelpers.redirectRuleHelper(this.model.toJSON()))},events:_.extend({},BaseRuleEditorView.prototype.events,{"keyup .pair-container input":"updateRulePair","change .pair-container select":"updateRulePair"}),isValidPair:function(a){var b=a.source,c=a.destination;return this.validateSourceField(b)&&this.validateDestinationField(b.operator,c)},alsoValidate:function(){var a,b=this.model.getPairs();for(a=0;a<b.length;a++)if(!this.isValidPair(b[a]))return a,!1;return!0},removeAdditionalFields:function(){var a=this.model.getPairs();_.each(a,function(a){delete a.sourcePlaceholder,delete a.destinationPlaceholder})}
}),CancelRuleEditorView=RedirectRuleEditorView.extend({Model:CancelRuleModel,id:"cancel-rule-editor",className:"rule-editor",getTemplate:function(){return RQ.Templates.CancelRuleEditor},isValidPair:function(a){var b=a.source;return this.validateSourceField(b)},removeAdditionalFields:function(){var a=this.model.getPairs();_.each(a,function(a){delete a.sourcePlaceholder,delete a.destinationPlaceholder,delete a.destination})}}),ReplaceRuleEditorView=BaseRuleEditorView.extend({Model:ReplaceRuleModel,Mixins:[RQ.Mixins.InputValidation],id:"replace-rule-editor",className:"replace-rule-editor rule-editor",getTemplate:function(){return RQ.Templates.ReplaceRuleEditor},events:_.extend({},BaseRuleEditorView.prototype.events,{"keyup .pair-container input":"updateRulePair"}),alsoValidate:function(){var a,b=this.model.getPairs();for(a=0;a<b.length;a++)if(!this.isValidPair(b[a]))return a,!1;return!0},isValidPair:function(a){return this.validateFieldNonEmpty("replace",a.from)}}),HeadersEditorView=BaseRuleEditorView.extend({Model:HeadersRuleModel,getTemplate:function(){return RQ.Templates.HeadersRuleTemplate},id:"headers-rule-editor",className:"rule-editor",events:_.extend({},BaseRuleEditorView.prototype.events,{"keyup .pair-container input":"updateRulePair"}),hideMessage:function(){$(this.el).find(".message").hide()}}),UserAgentRuleEditorView=BaseRuleEditorView.extend({Model:UserAgentRuleModel,Mixins:[RQ.Mixins.InputValidation],id:"useragent-rule-editor",className:"rule-editor",getTemplate:function(){return RQ.Templates.UserAgentRuleEditor},events:_.extend({},BaseRuleEditorView.prototype.events,{"keyup .pair-container input":"updateRulePair","change .pair-container select":"updateRulePair","change .pair-container .request-type-checkbox":"updateRequestType"}),isValidPair:function(a){var b=a.source,c=a.userAgent;return(!b.value||this.validateSourceField(b))&&this.validateFieldNonEmpty(RQ.HEADER_NAMES.USER_AGENT,c)},alsoValidate:function(){var a,b=this.model.getPairs();for(a=0;a<b.length;a++)if(!this.isValidPair(b[a]))return a,!1;return!0},onFieldUpdatedInPair:function(a,b,c){"envType"===b&&(a.userAgent="custom"===c?RQ.UserAgentLibrary.getDefaultUserAgent():"",a.env=""),"env"===b&&(a.userAgent=this.getUserAgent(a.envType,c))},getUserAgent:function(a,b){for(var c=RQ.UserAgentLibrary.USER_AGENT[a],d=b.split("."),e=0;e<d.length-1;)c=c[d[e]].values,e++;return c[d[e]].value},updateRequestType:function(a){var b=$(a.target),c=Number(b.parents(".pair-container").attr("data-index")),d=b.is(":checked")?RQ.REQUEST_TYPES.MAIN_FRAME:RQ.REQUEST_TYPES.PAGE_REQUEST,e=this.model.getPairs();this.updateFieldInPair(e[c],"source.requestType",d)}}),ScriptRuleEditorView=BaseRuleEditorView.extend({Model:ScriptRuleModel,Mixins:[RQ.Mixins.InputValidation],id:"script-rule-editor",className:"rule-editor",CODE_MAX_LENGTH:500,CODE_MAX_RULES:3,getTemplate:function(){return RQ.Templates.ScriptRuleEditor},events:_.extend({},BaseRuleEditorView.prototype.events,{"keyup .source-value-input":"updateRulePair","click .add-script":"addScript","click .remove-script":"removeScript","click .script-type":"handleScriptTypeChange","keyup .script-url-input":"updateScriptValue","keyup .script-code-input":"updateScriptCode",'change input[name="library"]':"handleLibrarySelection"}),addScript:function(){var a=this.model.getDefaultScript();this.model.getScripts().push(a),this.render()},removeScript:function(a){var b=$(a.target),c=Number(b.closest(".script-section").attr("data-index"));this.model.getScripts().splice(c,1),this.render()},updateScriptValue:function(a){var b=$(a.target),c=Number(b.closest(".script-section").attr("data-index"));this.model.getScripts()[c].value=b.val()},updateScriptCode:function(a){var b=$(a.target),c=b.val();this.updateScriptValue(a),b.siblings(".script-code-characters").find(".count").text(this.CODE_MAX_LENGTH-c.length)},handleLibrarySelection:function(a){var b=this.$el.find('input[name="library"]:checked').map(function(){return this.value}).get();this.model.setLibraries(b)},handleScriptTypeChange:function(a){var b=$(a.target),c=Number(b.closest(".script-section").attr("data-index")),d=this.model.getScripts();d[c].type=b.val(),d[c].value="",this.render()},handleDropdownValueChanged:function(a){var b=$(a.target),c=b.closest(".dropdown");if(!c.hasClass("script-load-time"))return void BaseRuleEditorView.prototype.handleDropdownValueChanged.apply(this,arguments);c.find(".dropdown-item").removeAttr("selected"),b.attr("selected",!0);var d=Number(b.closest(".script-section").attr("data-index")),e=this.model.getScripts();this.updateDropdownSelectionState(c),e[d].loadTime=b.attr("data-value")},isValidPair:function(a){var b=a.source,c=a.scripts;return(!b.value||this.validateSourceField(b))&&(_.isEmpty(c)?this.validateLibraries(a.libraries):this.validateScripts(c))},validateScripts:function(a){return _.filter(a,function(a){return a.type===RQ.SCRIPT_TYPES.CODE}).length>this.CODE_MAX_RULES?(Notification.show("error","Error: You cannot add more than 3 custom code scripts in a rule."),!1):_.every(a,function(a){return a.type===RQ.SCRIPT_TYPES.CODE&&a.value.length>this.CODE_MAX_LENGTH?(Notification.show("error","Error: Code should not exceed 250 characters."),!1):this.validateFieldNonEmpty(a.type===RQ.SCRIPT_TYPES.CODE?"Script Code":"Script URL",a.value)},this)},validateLibraries:function(a){return!_.isEmpty(a)||(Notification.show("error","Error: No library or script is added."),!1)},alsoValidate:function(){var a,b=this.model.getPairs();for(a=0;a<b.length;a++)if(!this.isValidPair(b[a]))return a,!1;return!0}}),BaseIndexView=Backbone.View.extend({events:{"click .select-all-rows-checkbox":"selectAllRows","click .select-row-checkbox":"selectRow","click .delete-items-button":"handleSelectedItemsDelete"},render:function(a){var b,c=$(this.el);a=a||{},this.onBeforeRender(),a&&a.update?this.updateCollection(a):(this.template=this.getTemplate(),b=this.getMarkup(this.template),c.html(b)),this.initWidgets(),this.renderSubComponents()},getMarkup:function(a){return a({items:this.collection.toJSON()})},renderSubComponents:function(){},onBeforeRender:function(){this.childViews&&this.childViews.length&&_.each(this.childViews,function(a){a.close()}),this.childViews=[]},selectRow:function(a){var b=$(a.currentTarget),c=b.is(":checked");c||$(".select-all-rows-checkbox").prop("checked",!1),b.closest(".item-row").toggleClass("selected",c)},selectAllRows:function(a){var b=$(a.currentTarget).is(":checked");$(".select-row-checkbox").prop("checked",b),$(".item-row").toggleClass("selected",b)},getSelectedRows:function(){var a=$(".select-row-checkbox:checked").closest(".item-row"),b=[];return _.each(a,function(a){b.push(this.getItemFromRow(a))},this),b},getItemFromRow:function(a){var b=$(a),c=b.data("id");return this.collection.get(c)},handleSelectedItemsDelete:function(){var a=this.getSelectedRows();if(!a.length)return void alert("Please select one or more rules to delete");window.confirm(RQ.MESSAGES.DELETE_ITEMS)&&this.deleteItems(a)},initWidgets:function(){},deleteItems:function(){},updateCollection:function(){throw new Error("Child class must implement logic to updateCollection")}}),PushNotificationView=BaseIndexView.extend({className:"push-notifications-container",Collection:PushNotificationCollection,events:{"click .mark-all-read-action":"markNotificationsAsRead"},getTemplate:function(){return RQ.Templates.PushNotification},getMarkup:function(a){var b=this.getUnReadNotificationsCount(this.collection.models);return a({items:this.collection.toJSON(),unReadNotificationsCount:b})},getUnReadNotificationsCount:function(a){return a.reduce(function(a,b){return b.get("isRead")?a:a+1},0)},getLatestNotificationId:function(a){return a.reduce(function(a,b){return Math.max(b.get("id"),a)},-1)},initialize:function(){this.collection=new this.Collection,this.registerListeners()},registerListeners:function(){this.listenTo(this.collection,"loaded",this.render)},updateCollection:function(){this.collection.fetchItems()},markNotificationsAsRead:function(){var a=RQ.STORAGE_KEYS.LATEST_NOTIFICATION_READ_BY_USER,b={},c=this;b[a]=this.getLatestNotificationId(this.collection.models),RQ.StorageService.saveRecord(b,function(){c.updateCollection()})}}),RuleIndexView=BaseIndexView.extend({className:"rule-index",Collection:RulesCollection,childViews:[],events:_.extend(BaseIndexView.prototype.events,{"click .ruleName":"showRuleEditor","change .status-toggle":"toggleStatus","click .export-rules-button":"exportRules","click .import-rules-button":"importRules","click .share-rules-button":"handleShareRulesButtonClicked"}),initialize:function(){this.collection=new this.Collection,this.susiModal=new SusiModal,this.shareRulesModal=new ShareRulesModal({}),this.registerListeners()},registerListeners:function(){this.listenTo(this.collection,"loaded",this.render),this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"reset",this.render),this.shareRulesModal.on("modal:closed",this.saveSharedListName)},initWidgets:function(){this.$el=$(this.el),this.$el.find('[data-toggle="tooltip"]').tooltip()},updateCollection:function(){this.collection.fetchRules()},getTemplate:function(){return RQ.Templates.RuleIndex},getMarkup:function(a){return a({rules:this.collection.toJSON(),user:RQ.currentUser.toJSON()})},renderSubComponents:function(){this.childViews.push(this.renderPushNotificationComponent())},renderPushNotificationComponent:function(){return this.pushNotificationView=new PushNotificationView({el:this.$el.find(".notification-container")}),this.pushNotificationView.render({update:!0}),this.pushNotificationView},showRuleEditor:function(a){var b=$(a.target).parents(".rule-item-row"),c=b.data("id");RQ.router.navigate("/edit/"+c,{trigger:!0})},toggleStatus:function(a){var b=$(a.currentTarget).parents(".rule-item-row"),c=this.collection.get(b.data("id"));return this.toggleRuleStatus(c)},toggleRuleStatus:function(a){var b,c,d=a.getName();return a.getStatus()===RQ.RULE_STATUS.ACTIVE?(a.setStatus(RQ.RULE_STATUS.INACTIVE),b=RQ.GA_EVENTS.ACTIONS.DEACTIVATED):(a.setStatus(RQ.RULE_STATUS.ACTIVE),b=RQ.GA_EVENTS.ACTIONS.ACTIVATED),c=a.getStatus(),a.save({callback:function(){Notification.show("info",d+" is now "+c),RQ.Utils.submitEvent("rule",b,a.getRuleType().toLowerCase()+" rule "+b)}}),!1},deleteItems:function(a){a.forEach(function(a){a.remove()}),this.collection.remove(a),Notification.show("success",a.length+" rules have been deleted!"),RQ.Utils.submitEvent("rules",RQ.GA_EVENTS.ACTIONS.DELETED,["Multiple","rules",RQ.GA_EVENTS.ACTIONS.DELETED].join(" "))},exportRules:function(){var a=this.getSelectedRows(),b=a.length?a:this.collection.models,c=_.pluck(b,"attributes");Backbone.trigger("file:save",JSON.stringify(c,null,2),"requestly_rules"),RQ.Utils.submitEvent("rules",RQ.GA_EVENTS.ACTIONS.EXPORTED,"Rules "+RQ.GA_EVENTS.ACTIONS.EXPORTED)},importRules:function(){var a=this;Backbone.trigger("file:load",function(b){var c=0,d=JSON.parse(b);_.each(d,function(b){var d=new BaseRuleModel(b);d.isValid()&&(c++,a.collection.set(d,{remove:!1,silent:!0}),d.save())}),d.length==c?Notification.show("success","All Rules Imported Successfully"):0==c?Notification.show("error","Imported Rules are invalid"):Notification.show("success",c+" out of "+d.length+" rules imported successfully"),a.render(),RQ.Utils.submitEvent("rules",RQ.GA_EVENTS.ACTIONS.IMPORTED,"Rules "+RQ.GA_EVENTS.ACTIONS.IMPORTED)})},showLoginModal:function(a){this.susiModal.show({loginCallback:a})},handleShareRulesButtonClicked:function(){var a=this;RQ.DataStoreUtils.isUserAuthenticated(function(b){b?a.createSharedList():a.showLoginModal(function(){a.susiModal.hide(),a.createSharedList()})})},createSharedList:function(){var a,b,c=RQ.Utils.getId(),d=_.pluck(this.getSelectedRows(),"attributes"),e=this;if(0===d.length)return void alert("Please select one or more rules to share");a=RQ.currentUser.getUserSharedListsPath(),RQ.DataStoreUtils.getValue(a,function(a){if(_.keys(a).length>=RQ.LIMITS.NUMBER_SHARED_LISTS)return RQ.showModalView(new Modal,{model:{heading:"Limit Exceeded",content:RQ.MESSAGES.SHARED_LISTS_LIMIT_REACHED,cancelButton:!0}}),void RQ.Utils.submitEvent(RQ.GA_EVENTS.CATEGORIES.SHARED_LIST,RQ.GA_EVENTS.ACTIONS.LIMIT_REACHED,"Shared List limit reached");b=RQ.currentUser.createSharedList(c,d),e.saveSharedListName({shareId:c}),e.shareRulesModal.show({model:{shareId:c,sharedUrl:b}})})},saveSharedListName:function(a){var b=a.listName||"My Shared List",c=a.shareId;RQ.currentUser.setSharedListName(c,b)}}),SharedRulesIndexView=BaseIndexView.extend({Collection:SharedRulesCollection,className:"shared-rules-index",events:_.extend(BaseIndexView.prototype.events,{"click .ruleName":"showRuleEditor","click .import-rules-button":"importRules"}),getTemplate:function(){return RQ.Templates.SharedRulesIndex},getMarkup:function(a){return a({rules:this.collection.toJSON(),user:RQ.currentUser.toJSON()})},initialize:function(a){this.collection=new this.Collection,this.options=a||{},this.listenTo(this.collection,"loaded",this.render)},updateCollection:function(a){this.collection.fetchRules(a.sharedListId)},showRuleEditor:function(a){var b=$(a.target).parents(".rule-item-row"),c=this.options.sharedListId,d=b.data("index");RQ.router.navigate("/sharedList/"+c+"/"+d,{trigger:!0})},importRules:function(){var a=this.collection.toJSON();_.each(a,function(a){new BaseRuleModel(a).save()}),RQ.Utils.submitEvent(RQ.GA_EVENTS.CATEGORIES.SHARED_LIST,RQ.GA_EVENTS.ACTIONS.IMPORTED,"Shared List "+RQ.GA_EVENTS.ACTIONS.IMPORTED),Notification.show("success","Rules Imported Successfully")}}),SharedListIndexView=BaseIndexView.extend({Collection:SharedListCollection,className:"shared-list-index",getTemplate:function(){return RQ.Templates.SharedListIndex},getMarkup:function(a){return a({list:this.collection.toJSON(),user:RQ.currentUser.toJSON()})},initialize:function(a){this.collection=new this.Collection,this.options=a||{},this.listenTo(this.collection,"loaded",this.render),this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"reset",this.render)},updateCollection:function(){this.collection.fetchSharedLists()},initWidgets:function(){this.clipboard&&this.clipboard.destroy(),this.clipboard=new Clipboard(".copy-action"),this.clipboard.on("success",function(a){Notification.show("success","SharedList url copied!")})},deleteItems:function(a){var b,c,d,e=RQ.currentUser.getUserSharedListsPath(),f=a.length,g=this;if(f>0){c=a[f-1],d=c.get("id");var h=[].concat(e);h.push(d),RQ.DataStoreUtils.setValue(h,null,function(){b=RQ.currentUser.getPublicSharedListPath(d),RQ.DataStoreUtils.setValue(b,null,function(){a.length=a.length-1,g.collection.remove(d),g.deleteItems(a)})})}else Notification.show("success","Selected shared lists have been deleted!"),RQ.Utils.submitEvent(RQ.GA_EVENTS.CATEGORIES.SHARED_LIST,RQ.GA_EVENTS.ACTIONS.DELETED,["Multiple","shared lists",RQ.GA_EVENTS.ACTIONS.DELETED].join(" "))}}),RuleCardsView=Backbone.View.extend({events:{"click .rule-card":"selectRule"},render:function(a){a&&a.model&&a.model instanceof Backbone.Model&&(this.model=a.model);var b=RQ.Templates.RuleCardsView;$(this.el).html(b)},selectRule:function(a){var b=$(a.currentTarget),c=b.attr("data-target");RQ.router.navigate(c,!0)}});RQ.Router=Backbone.Router.extend({routes:{"":"showRulesList",selectRule:"showRuleCardsView","new/:type":"showRuleCreator","edit/:id":"showRuleEditor",sharedLists:"showSharedLists","sharedList/:id":"showSharedRulesList","sharedList/:id/:ruleIndex":"showSharedRuleEditor"},ruleModelMap:{REDIRECT:RedirectRuleModel,CANCEL:CancelRuleModel,REPLACE:ReplaceRuleModel,HEADERS:HeadersRuleModel,USERAGENT:UserAgentRuleModel,SCRIPT:ScriptRuleModel},ruleViewMap:{REDIRECT:RedirectRuleEditorView,CANCEL:CancelRuleEditorView,REPLACE:ReplaceRuleEditorView,HEADERS:HeadersEditorView,USERAGENT:UserAgentRuleEditorView,SCRIPT:ScriptRuleEditorView},showRulesList:function(){var a=new RuleIndexView;RQ.showView(a,{update:!0})},showSharedLists:function(){var a=new SharedListIndexView;RQ.DataStoreUtils.isUserAuthenticated(function(b){var c;b?RQ.showView(a,{update:!0}):(c=new SusiModal({model:RQ.currentUser}),c.show({model:{content:RQ.MESSAGES.SIGN_IN_TO_VIEW_SHARED_LISTS},loginCallback:function(b){c.hide(),RQ.showView(a,{update:!0})}}))},!0)},showSharedRulesList:function(a){var b=new SharedRulesIndexView({sharedListId:a});RQ.showView(b,{update:!0,sharedListId:a}),RQ.Utils.submitEvent(RQ.GA_EVENTS.CATEGORIES.SHARED_LIST,RQ.GA_EVENTS.ACTIONS.VIEWED,"Shared List Viewed")},showRuleCardsView:function(){var a=new RuleCardsView;RQ.showView(a)},showRuleCreator:function(a){var b=a.toUpperCase(),c=new this.ruleViewMap[b];RQ.showView(c)},showRuleEditor:function(a){var b=this;RQ.StorageService.getRecord(a,function(c){var d=c[a],e=d.ruleType.toUpperCase(),f=new b.ruleViewMap[e],g=new b.ruleModelMap[e](d);RQ.showView(f,{model:g})})},showSharedRuleEditor:function(a,b){var c=RQ.currentUser.getPublicSharedListPath(a),d=this;RQ.DataStoreUtils.getValue(c,function(a){var c,e,f,g=a.rules[b];if(!g||_.isEmpty(g))return void alert("Rule does not exist");g.isViewMode=!0,g.isSharedRule=!0,c=g.ruleType.toUpperCase(),e=new d.ruleViewMap[c],f=new d.ruleModelMap[c](g),RQ.showView(e,{model:f})})}}),RQ.init({el:".content"});